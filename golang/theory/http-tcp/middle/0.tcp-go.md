# 0. TCP основы в Go

TCP (Transmission Control Protocol) - это протокол транспортного уровня, на котором работает HTTP. Понимание TCP поможет лучше понимать HTTP.

## Что важно знать о TCP:
- **Надежный** - гарантирует доставку данных
- **Потоковый** - данные передаются как поток байтов
- **Соединение** - нужно установить соединение перед передачей

## Простейший TCP сервер

```go
package main

import (
    "fmt"
    "net"
)

func main() {
    // Слушаем порт 8080
    listener, err := net.Listen("tcp", ":8080")
    if err != nil {
        panic(err)
    }
    defer listener.Close()
    
    fmt.Println("TCP сервер запущен на :8080")
    
    for {
        // Принимаем соединение
        conn, err := listener.Accept()
        if err != nil {
            continue
        }
        
        // Обрабатываем в отдельной горутине
        go handleConnection(conn)
    }
}

func handleConnection(conn net.Conn) {
    defer conn.Close()
    
    // Читаем данные
    buffer := make([]byte, 1024)
    n, err := conn.Read(buffer)
    if err != nil {
        return
    }
    
    // Отправляем ответ
    response := fmt.Sprintf("Получил: %s", string(buffer[:n]))
    conn.Write([]byte(response))
}
```

## Простейший TCP клиент

```go
package main

import (
    "fmt"
    "net"
)

func main() {
    // Подключаемся к серверу
    conn, err := net.Dial("tcp", "localhost:8080")
    if err != nil {
        panic(err)
    }
    defer conn.Close()
    
    // Отправляем данные
    message := "Привет, сервер!"
    conn.Write([]byte(message))
    
    // Читаем ответ
    buffer := make([]byte, 1024)
    n, err := conn.Read(buffer)
    if err != nil {
        panic(err)
    }
    
    fmt.Printf("Ответ сервера: %s\n", string(buffer[:n]))
}
```

## Как TCP связан с HTTP?

HTTP - это протокол **прикладного уровня**, который работает поверх TCP:
- HTTP запрос = TCP соединение + специальный формат сообщения
- HTTP сервер = TCP сервер + парсинг HTTP формата
- Пакет `net/http` в Go делает всю TCP работу за нас

**Вывод:** TCP дает надежную передачу байтов, а HTTP добавляет структуру (заголовки, методы, статус-коды).

---
