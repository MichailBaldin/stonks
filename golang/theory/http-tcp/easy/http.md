# HTTP - —á—Ç–æ —ç—Ç–æ –∏ –∑–∞—á–µ–º –Ω—É–∂–Ω–æ?

## –û—Å–Ω–æ–≤–Ω–∞—è –∑–∞–¥–∞—á–∞ HTTP
HTTP —Ä–µ—à–∞–µ—Ç –ø—Ä–æ—Å—Ç—É—é –∑–∞–¥–∞—á—É: **–∫–∞–∫ –ø—Ä–æ–≥—Ä–∞–º–º—ã –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –∫–æ–º–ø—å—é—Ç–µ—Ä–∞—Ö –º–æ–≥—É—Ç –æ–±–º–µ–Ω–∏–≤–∞—Ç—å—Å—è –¥–∞–Ω–Ω—ã–º–∏ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç**.

–ü—Ä–µ–¥—Å—Ç–∞–≤—å: —É —Ç–µ–±—è –µ—Å—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ –ê, –∫–æ—Ç–æ—Ä–∞—è —Ö–æ—á–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –æ—Ç –ø—Ä–æ–≥—Ä–∞–º–º—ã –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ –ë. HTTP - —ç—Ç–æ –Ω–∞–±–æ—Ä –ø—Ä–∞–≤–∏–ª, –∫–∞–∫ –æ–Ω–∏ –¥–æ–ª–∂–Ω—ã "—Ä–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞—Ç—å".

## –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏

**–ö–ª–∏–µ–Ω—Ç-—Å–µ—Ä–≤–µ—Ä –º–æ–¥–µ–ª—å:**
- **–ö–ª–∏–µ–Ω—Ç** - —Ç–æ—Ç –∫—Ç–æ –ø—Ä–æ—Å–∏—Ç (–±—Ä–∞—É–∑–µ—Ä, –º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, —Ç–≤–æ—è Go –ø—Ä–æ–≥—Ä–∞–º–º–∞)
- **–°–µ—Ä–≤–µ—Ä** - —Ç–æ—Ç –∫—Ç–æ –æ—Ç–≤–µ—á–∞–µ—Ç (–≤–µ–±-—Å–µ—Ä–≤–µ—Ä, API)
- –ö–ª–∏–µ–Ω—Ç –≤—Å–µ–≥–¥–∞ –∏–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç –æ–±—â–µ–Ω–∏–µ

**–ó–∞–ø—Ä–æ—Å-–æ—Ç–≤–µ—Ç:**
- –ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç **–∑–∞–ø—Ä–æ—Å** (request) 
- –°–µ—Ä–≤–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç **–æ—Ç–≤–µ—Ç** (response)
- –ö–∞–∂–¥—ã–π –æ–±–º–µ–Ω –Ω–µ–∑–∞–≤–∏—Å–∏–º (stateless)

## –ü—Ä–æ—Å—Ç–µ–π—à–∏–π –ø—Ä–∏–º–µ—Ä –≤ –∂–∏–∑–Ω–∏

–¢—ã –∑–∞—Ö–æ–¥–∏—à—å –≤ –∫–∞—Ñ–µ (–∫–ª–∏–µ–Ω—Ç), –≥–æ–≤–æ—Ä–∏—à—å –æ—Ñ–∏—Ü–∏–∞–Ω—Ç—É "–î–∞–π—Ç–µ –∫–æ—Ñ–µ" (–∑–∞–ø—Ä–æ—Å), –ø–æ–ª—É—á–∞–µ—à—å –∫–æ—Ñ–µ (–æ—Ç–≤–µ—Ç).

HTTP —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–∞–∫ –∂–µ:
```bash
–ö–ª–∏–µ–Ω—Ç: "GET /coffee HTTP/1.1"
–°–µ—Ä–≤–µ—Ä: "200 OK, –≤–æ—Ç –≤–∞—à –∫–æ—Ñ–µ"
```

---

# –°—Ç—Ä—É–∫—Ç—É—Ä–∞ HTTP —Å–æ–æ–±—â–µ–Ω–∏–π

## –ö–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç HTTP –∑–∞–ø—Ä–æ—Å

HTTP –∑–∞–ø—Ä–æ—Å —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Ç—Ä–µ—Ö —á–∞—Å—Ç–µ–π:

```
GET /users/123 HTTP/1.1        ‚Üê –°—Ç–∞—Ä—Ç–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞
Host: api.example.com          ‚Üê –ó–∞–≥–æ–ª–æ–≤–∫–∏  
User-Agent: MyApp/1.0          ‚Üê –ó–∞–≥–æ–ª–æ–≤–∫–∏
                               ‚Üê –ü—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ!)
                               ‚Üê –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å)
```

**–°—Ç–∞—Ä—Ç–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç:**
- **–ú–µ—Ç–æ–¥** (GET, POST, PUT, DELETE) - —á—Ç–æ —Ö–æ—Ç–∏–º —Å–¥–µ–ª–∞—Ç—å
- **–ü—É—Ç—å** (/users/123) - —Å —á–µ–º —Ö–æ—Ç–∏–º —Ä–∞–±–æ—Ç–∞—Ç—å  
- **–í–µ—Ä—Å–∏—è** (HTTP/1.1) - –∫–∞–∫—É—é –≤–µ—Ä—Å–∏—é –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –∏—Å–ø–æ–ª—å–∑—É–µ–º

**–ó–∞–≥–æ–ª–æ–≤–∫–∏** - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:
- `Host` - –Ω–∞ –∫–∞–∫–æ–π —Å–µ—Ä–≤–µ—Ä –æ–±—Ä–∞—â–∞–µ–º—Å—è
- `Content-Type` - –∫–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º
- `Authorization` - —Ç–æ–∫–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

## –ö–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç HTTP –æ—Ç–≤–µ—Ç

```
HTTP/1.1 200 OK                ‚Üê –°—Ç–∞—Ç—É—Å —Å—Ç—Ä–æ–∫–∞
Content-Type: application/json ‚Üê –ó–∞–≥–æ–ª–æ–≤–∫–∏
Content-Length: 45             ‚Üê –ó–∞–≥–æ–ª–æ–≤–∫–∏
                               ‚Üê –ü—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞
{"id": 123, "name": "–ò–≤–∞–Ω"}    ‚Üê –¢–µ–ª–æ –æ—Ç–≤–µ—Ç–∞
```

**–°—Ç–∞—Ç—É—Å —Å—Ç—Ä–æ–∫–∞:**
- **–í–µ—Ä—Å–∏—è** (HTTP/1.1)
- **–ö–æ–¥ —Å—Ç–∞—Ç—É—Å–∞** (200, 404, 500) - —á—Ç–æ –ø–æ–ª—É—á–∏–ª–æ—Å—å
- **–§—Ä–∞–∑–∞** (OK, Not Found) - —á–µ–ª–æ–≤–µ–∫–æ-—á–∏—Ç–∞–µ–º–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

## –ü—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä –≤ Go

```go
// –û—Ç–ø—Ä–∞–≤–ª—è–µ–º GET –∑–∞–ø—Ä–æ—Å
resp, err := http.Get("https://api.github.com/users/octocat")

// –ü–æ–ª—É—á–∞–µ–º:
// GET /users/octocat HTTP/1.1
// Host: api.github.com
// User-Agent: Go-http-client/1.1
```

---

# HTTP –º–µ—Ç–æ–¥—ã - –∑–∞—á–µ–º –Ω—É–∂–Ω—ã —Ä–∞–∑–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –æ–±—Ä–∞—â–µ–Ω–∏—è?

## –ü—Ä–æ–±–ª–µ–º–∞, –∫–æ—Ç–æ—Ä—É—é —Ä–µ—à–∞—é—Ç –º–µ—Ç–æ–¥—ã

–ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —É –Ω–∞—Å –µ—Å—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Å–ø–æ—Å–æ–± –æ–±—â–µ–Ω–∏—è - –ø—Ä–æ—Å—Ç–æ "–¥–∞–π –¥–∞–Ω–Ω—ã–µ". –ù–æ –≤ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞–º –Ω—É–∂–Ω–æ:
- –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é 
- –°–æ–∑–¥–∞—Ç—å —á—Ç–æ-—Ç–æ –Ω–æ–≤–æ–µ
- –ò–∑–º–µ–Ω–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ
- –£–¥–∞–ª–∏—Ç—å –Ω–µ–Ω—É–∂–Ω–æ–µ

HTTP –º–µ—Ç–æ–¥—ã —Ä–µ—à–∞—é—Ç —ç—Ç—É –ø—Ä–æ–±–ª–µ–º—É - –æ–Ω–∏ –≥–æ–≤–æ—Ä—è—Ç —Å–µ—Ä–≤–µ—Ä—É **—á—Ç–æ –∏–º–µ–Ω–Ω–æ** –º—ã —Ö–æ—Ç–∏–º —Å–¥–µ–ª–∞—Ç—å.

## –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã

**GET** - "–¥–∞–π –º–Ω–µ –¥–∞–Ω–Ω—ã–µ"
```
GET /users/123  ‚Üí –ø–æ–ª—É—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å ID 123
GET /posts      ‚Üí –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ—Å—Ç–æ–≤
```
- –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π (–Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)
- –ú–æ–∂–Ω–æ –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ URL

**POST** - "—Å–æ–∑–¥–∞–π —á—Ç–æ-—Ç–æ –Ω–æ–≤–æ–µ"
```
POST /users     ‚Üí —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
POST /posts     ‚Üí –Ω–∞–ø–∏—Å–∞—Ç—å –Ω–æ–≤—ã–π –ø–æ—Å—Ç
```
- –î–∞–Ω–Ω—ã–µ –≤ —Ç–µ–ª–µ –∑–∞–ø—Ä–æ—Å–∞
- –ò–∑–º–µ–Ω—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞
- –ù–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –¥–ª—è –ø–æ–≤—Ç–æ—Ä–∞

**PUT** - "–æ–±–Ω–æ–≤–∏/–∑–∞–º–µ–Ω–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é"
```
PUT /users/123  ‚Üí –∑–∞–º–µ–Ω–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 123 –Ω–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
```

**DELETE** - "—É–¥–∞–ª–∏"
```
DELETE /users/123  ‚Üí —É–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 123
```

## –ü—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä –≤ Go

```go
// –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
resp, err := http.Get("https://api.example.com/users")

// –°–æ–∑–¥–∞—Ç—å –¥–∞–Ω–Ω—ã–µ  
http.Post("https://api.example.com/users", "application/json", body)
```

## –ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã?

- **–°–µ–º–∞–Ω—Ç–∏–∫–∞** - —Å—Ä–∞–∑—É –ø–æ–Ω—è—Ç–Ω–æ —á—Ç–æ –¥–µ–ª–∞–µ—Ç –∑–∞–ø—Ä–æ—Å
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - –±—Ä–∞—É–∑–µ—Ä—ã –∫—ç—à–∏—Ä—É—é—Ç —Ç–æ–ª—å–∫–æ GET
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - GET –Ω–µ –¥–æ–ª–∂–µ–Ω –∏–∑–º–µ–Ω—è—Ç—å –¥–∞–Ω–Ω—ã–µ
- **REST API** - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—é API

---

–¢—ã –ø—Ä–∞–≤, –∏–∑–≤–∏–Ω–∏. –í–æ—Ç –≤–∞–∂–Ω—ã–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ HTTP:

# –î–µ—Ç–∞–ª–∏ –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –≤ HTTP

## GET vs POST - –≥–¥–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ

**GET - –¥–∞–Ω–Ω—ã–µ –≤ URL:**
```
GET /search?username=admin&password=123456 HTTP/1.1
Host: example.com
```

**POST - –¥–∞–Ω–Ω—ã–µ –≤ —Ç–µ–ª–µ:**
```
POST /login HTTP/1.1
Host: example.com
Content-Type: application/x-www-form-urlencoded

username=admin&password=123456
```

## –ü–æ—á–µ–º—É –ª–æ–≥–∏–Ω—ã/–ø–∞—Ä–æ–ª–∏ –ù–ï–õ–¨–ó–Ø —á–µ—Ä–µ–∑ GET

**1. –õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞**
```
[access.log] GET /login?user=admin&pass=secret123 - –≤—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤ –ª–æ–≥–∞—Ö!
```

**2. –ò—Å—Ç–æ—Ä–∏—è –±—Ä–∞—É–∑–µ—Ä–∞**
```
–ë—Ä–∞—É–∑–µ—Ä —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç: example.com/login?password=secret123
```

**3. Referrer –∑–∞–≥–æ–ª–æ–≤–∫–∏**
```
User-Agent –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç —Å example.com/login?pass=123 –Ω–∞ google.com
Google –ø–æ–ª—É—á–∞–µ—Ç: Referer: example.com/login?pass=123
```

**4. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**
```
–ë—Ä–∞—É–∑–µ—Ä/–ø—Ä–æ–∫—Å–∏ –∫—ç—à–∏—Ä—É—é—Ç GET –∑–∞–ø—Ä–æ—Å—ã ‚Üí –ø–∞—Ä–æ–ª—å –æ—Å—Ç–∞–µ—Ç—Å—è –≤ –∫—ç—à–µ
```

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–ª–∏–Ω—ã URL

**–ë—Ä–∞—É–∑–µ—Ä—ã:**
- Chrome: ~8000 —Å–∏–º–≤–æ–ª–æ–≤
- IE: 2048 —Å–∏–º–≤–æ–ª–æ–≤  
- Firefox: ~65000 —Å–∏–º–≤–æ–ª–æ–≤

**–°–µ—Ä–≤–µ—Ä—ã:**
- Apache: 8000 –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- Nginx: 4096-8192
- IIS: 16384

**–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä:**
```go
// –≠–¢–û –ü–õ–û–•–û - –º–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å –≤ IE
longURL := "http://example.com/search?data=" + strings.Repeat("x", 3000)
http.Get(longURL) // –ú–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å 414 Request-URI Too Large
```

## –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ GET vs POST

**GET –∫—ç—à–∏—Ä—É–µ—Ç—Å—è:**
```go
// –≠—Ç–æ—Ç –∑–∞–ø—Ä–æ—Å –º–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –∫—ç—à–∞ –±—Ä–∞—É–∑–µ—Ä–∞
resp, _ := http.Get("http://api.com/users")
```

**POST –ù–ï –∫—ç—à–∏—Ä—É–µ—Ç—Å—è:**
```go
// –≠—Ç–æ—Ç –∑–∞–ø—Ä–æ—Å –≤—Å–µ–≥–¥–∞ –∏–¥–µ—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä
http.Post("http://api.com/users", "application/json", body)
```

## Content-Length –≤ POST

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è POST —Å —Ç–µ–ª–æ–º:**
```
POST /api HTTP/1.1
Content-Length: 25    ‚Üê –ë–µ–∑ —ç—Ç–æ–≥–æ —Å–µ—Ä–≤–µ—Ä –Ω–µ –ø–æ–π–º–µ—Ç –≥–¥–µ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è —Ç–µ–ª–æ

{"name": "test user"}
```

**–í Go —ç—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
```go
body := strings.NewReader(`{"name": "test"}`)
http.Post(url, "application/json", body) // Content-Length –¥–æ–±–∞–≤–∏—Ç—Å—è —Å–∞–º
```

---

# –ó–∞–≥–æ–ª–æ–≤–∫–∏ HTTP - —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤

**–§–æ—Ä–º–∞—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∞:**
```
–ò–º—è-–ó–∞–≥–æ–ª–æ–≤–∫–∞: –∑–Ω–∞—á–µ–Ω–∏–µ\r\n
```

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**
- –ò–º—è –∑–∞–≥–æ–ª–æ–≤–∫–∞: —Ç–æ–ª—å–∫–æ ASCII, –±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤, case-insensitive
- –ó–Ω–∞—á–µ–Ω–∏–µ: –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å UTF-8, –Ω–æ –ª—É—á—à–µ –∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å
- –û–±—â–∏–π —Ä–∞–∑–º–µ—Ä –≤—Å–µ—Ö –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤: –æ–±—ã—á–Ω–æ 8KB –ª–∏–º–∏—Ç

**–ü—Ä–∏–º–µ—Ä –ø—Ä–æ–±–ª–µ–º—ã:**
```go
// –≠–¢–û –°–õ–û–ú–ê–ï–¢–°–Ø
req.Header.Set("My Header", "value") // –ü—Ä–æ–±–µ–ª –≤ –∏–º–µ–Ω–∏ = –æ—à–∏–±–∫–∞

// –ü–†–ê–í–ò–õ–¨–ù–û  
req.Header.Set("My-Header", "value")
```

## –í–∞–∂–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏ –∏—Ö –ø–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏

**Host - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –≤ HTTP/1.1:**
```
GET /api HTTP/1.1
Host: example.com    ‚Üê –ë–ï–ó –≠–¢–û–ì–û —Å–µ—Ä–≤–µ—Ä –≤–µ—Ä–Ω–µ—Ç 400 Bad Request
```

**User-Agent - –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞:**
```
User-Agent: Mozilla/5.0 (compatible; MyBot/1.0)
```
–ú–Ω–æ–≥–∏–µ API –±–ª–æ–∫–∏—Ä—É—é—Ç –∑–∞–ø—Ä–æ—Å—ã –±–µ–∑ User-Agent –∏–ª–∏ —Å –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–º.

**Content-Type - –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è POST/PUT:**
```
// JSON –¥–∞–Ω–Ω—ã–µ
Content-Type: application/json; charset=utf-8

// –§–æ—Ä–º–∞
Content-Type: application/x-www-form-urlencoded

// –§–∞–π–ª—ã
Content-Type: multipart/form-data; boundary=something123
```

**Accept - —á—Ç–æ –∫–ª–∏–µ–Ω—Ç –ø–æ–Ω–∏–º–∞–µ—Ç:**
```
Accept: application/json, text/plain, */*
```

## –ö–æ–¥–∏—Ä–æ–≤–∫–∏ –∏ Content-Encoding

**–ü—Ä–æ–±–ª–µ–º–∞:** HTTP –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –¥–ª—è —Ç–µ–∫—Å—Ç–∞, –±–∏–Ω–∞—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω—É–∂–Ω–æ –∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å.

**Content-Encoding - —Å–∂–∞—Ç–∏–µ:**
```
Content-Encoding: gzip    ‚Üê –î–∞–Ω–Ω—ã–µ —Å–∂–∞—Ç—ã
Content-Encoding: deflate
Content-Encoding: br      ‚Üê Brotli (–Ω–æ–≤—ã–π, –ª—É—á—à–µ gzip)
```

**Transfer-Encoding - –∫–∞–∫ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ:**
```
Transfer-Encoding: chunked    ‚Üê –î–∞–Ω–Ω—ã–µ –∏–¥—É—Ç —á–∞—Å—Ç—è–º–∏
```

**–í Go –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
```go
// Go –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç Accept-Encoding: gzip
resp, _ := http.Get("http://example.com")
// –ò –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞–µ—Ç gzip –æ—Ç–≤–µ—Ç
```

## Chunked Transfer Encoding - –ø–µ—Ä–µ–¥–∞—á–∞ –ø–æ —á–∞—Å—Ç—è–º

**–ü—Ä–æ–±–ª–µ–º–∞:** –°–µ—Ä–≤–µ—Ä –Ω–µ –∑–Ω–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ –∑–∞—Ä–∞–Ω–µ–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –Ω–∞ –ª–µ—Ç—É).

**–†–µ—à–µ–Ω–∏–µ:** –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å —á–∞—Å—Ç—è–º–∏ (chunks).

**–§–æ—Ä–º–∞—Ç chunked:**
```
HTTP/1.1 200 OK
Transfer-Encoding: chunked

5\r\n          ‚Üê –†–∞–∑–º–µ—Ä –ø–µ—Ä–≤–æ–≥–æ chunk (5 –±–∞–π—Ç –≤ hex)
Hello\r\n      ‚Üê –î–∞–Ω–Ω—ã–µ –ø–µ—Ä–≤–æ–≥–æ chunk
6\r\n          ‚Üê –†–∞–∑–º–µ—Ä –≤—Ç–æ—Ä–æ–≥–æ chunk (6 –±–∞–π—Ç –≤ hex)  
 World\r\n     ‚Üê –î–∞–Ω–Ω—ã–µ –≤—Ç–æ—Ä–æ–≥–æ chunk
0\r\n          ‚Üê –†–∞–∑–º–µ—Ä 0 = –∫–æ–Ω–µ—Ü
\r\n           ‚Üê –§–∏–Ω–∞–ª—å–Ω—ã–π CRLF
```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:**
- –°—Ç—Ä–∏–º–∏–Ω–≥ –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤
- API —Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –¥–∞–Ω–Ω—ã—Ö –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- SSE (Server-Sent Events)

**–í Go:**
```go
func streamHandler(w http.ResponseWriter, r *http.Request) {
    // Go –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç chunked –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω Content-Length
    
    for i := 0; i < 5; i++ {
        fmt.Fprintf(w, "Chunk %d\n", i)
        w.(http.Flusher).Flush() // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º chunk
        time.Sleep(1 * time.Second)
    }
}
```

## Connection —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

**Connection: close**
```
Connection: close    ‚Üê –ó–∞–∫—Ä—ã—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –ø–æ—Å–ª–µ –æ—Ç–≤–µ—Ç–∞
```

**Connection: keep-alive** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ HTTP/1.1)
```
Connection: keep-alive    ‚Üê –û—Å—Ç–∞–≤–∏—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –æ—Ç–∫—Ä—ã—Ç—ã–º
Keep-Alive: timeout=60, max=100
```

**–ü—Ä–æ–±–ª–µ–º–∞ —Å keep-alive:**
```go
// –ë–ï–ó defer resp.Body.Close() —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –Ω–µ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è!
resp, _ := http.Get("http://example.com")
io.ReadAll(resp.Body)
// resp.Body.Close() ‚Üê –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –¥–ª—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
```

## –ü–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏ —Å –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏ –≤ Go

**1. Case-insensitive, –Ω–æ Go –∫–∞–Ω–æ–Ω–∏–∑–∏—Ä—É–µ—Ç:**
```go
req.Header.Set("content-type", "application/json")
fmt.Println(req.Header.Get("Content-Type")) // "application/json" - —Ä–∞–±–æ—Ç–∞–µ—Ç!
```

**2. –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:**
```go
req.Header.Add("Accept", "application/json")
req.Header.Add("Accept", "text/plain")
// Accept: application/json, text/plain
```

**3. –û–ø–∞—Å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ (Go –Ω–µ –¥–∞–µ—Ç –∏—Ö –º–µ–Ω—è—Ç—å):**
```go
// –≠—Ç–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∏ Go —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–∞–º, –∏–∑–º–µ–Ω–∏—Ç—å –Ω–µ–ª—å–∑—è:
// Content-Length, Connection, Transfer-Encoding
req.Header.Set("Content-Length", "100") // –ë—É–¥–µ—Ç –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–æ!
```

---

# HTTP —Å—Ç–∞—Ç—É—Å-–∫–æ–¥—ã - —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –≥–æ–≤–æ—Ä–∏—Ç –∫–ª–∏–µ–Ω—Ç—É

## –ó–∞—á–µ–º –Ω—É–∂–Ω—ã —Å—Ç–∞—Ç—É—Å-–∫–æ–¥—ã

**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–∏–ª –∑–∞–ø—Ä–æ—Å, –ø–æ–ª—É—á–∏–ª –æ—Ç–≤–µ—Ç. –ù–æ –∫–∞–∫ –ø–æ–Ω—è—Ç—å - –≤—Å–µ –ª–∏ –ø—Ä–æ—à–ª–æ —Ö–æ—Ä–æ—à–æ?

**–†–µ—à–µ–Ω–∏–µ:** –°–µ—Ä–≤–µ—Ä –≤ –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–æ–∫–µ –æ—Ç–≤–µ—Ç–∞ —Å–æ–æ–±—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç —á–∏—Å–ª–æ–≤—ã–º –∫–æ–¥–æ–º:

```
HTTP/1.1 200 OK        ‚Üê –í—Å–µ —Ö–æ—Ä–æ—à–æ
HTTP/1.1 404 Not Found ‚Üê –†–µ—Å—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω  
HTTP/1.1 500 Internal Server Error ‚Üê –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
```

## –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å—Ç–∞—Ç—É—Å-–∫–æ–¥–æ–≤

**1xx - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ** (—Ä–µ–¥–∫–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è)
- 100 Continue - –º–æ–∂–Ω–æ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É –¥–∞–Ω–Ω—ã—Ö

**2xx - –£—Å–ø–µ—Ö**
- 200 OK - –∑–∞–ø—Ä–æ—Å —É—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω
- 201 Created - —Ä–µ—Å—É—Ä—Å —Å–æ–∑–¥–∞–Ω
- 204 No Content - —É—Å–ø–µ—Ö, –Ω–æ –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞

**3xx - –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**
- 301 Moved Permanently - —Ä–µ—Å—É—Ä—Å –Ω–∞–≤—Å–µ–≥–¥–∞ –ø–µ—Ä–µ–µ—Ö–∞–ª
- 302 Found - –≤—Ä–µ–º–µ–Ω–Ω–æ–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- 304 Not Modified - –¥–∞–Ω–Ω—ã–µ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å (–¥–ª—è –∫—ç—à–∞)

**4xx - –û—à–∏–±–∫–∏ –∫–ª–∏–µ–Ω—Ç–∞**
- 400 Bad Request - –ø–ª–æ—Ö–æ–π –∑–∞–ø—Ä–æ—Å
- 401 Unauthorized - –Ω—É–∂–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- 403 Forbidden - –¥–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω
- 404 Not Found - —Ä–µ—Å—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω

**5xx - –û—à–∏–±–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞**
- 500 Internal Server Error - –æ—à–∏–±–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- 502 Bad Gateway - –ø—Ä–æ–∫—Å–∏ –ø–æ–ª—É—á–∏–ª –ø–ª–æ—Ö–æ–π –æ—Ç–≤–µ—Ç
- 503 Service Unavailable - —Å–µ—Ä–≤–∏—Å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

## –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä - –ø—Ä–æ—Å—Ç–æ–π —Å–µ—Ä–≤–µ—Ä

```go
package main

import (
    "fmt"
    "net/http"
)

func main() {
    http.HandleFunc("/ok", okHandler)
    http.HandleFunc("/created", createdHandler)
    http.HandleFunc("/notfound", notFoundHandler)
    http.HandleFunc("/error", errorHandler)
    
    fmt.Println("–°–µ—Ä–≤–µ—Ä –Ω–∞ :8080")
    http.ListenAndServe(":8080", nil)
}

func okHandler(w http.ResponseWriter, r *http.Request) {
    // 200 - –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    fmt.Fprintf(w, "–í—Å–µ —Ö–æ—Ä–æ—à–æ!")
}

func createdHandler(w http.ResponseWriter, r *http.Request) {
    // 201 - —Ä–µ—Å—É—Ä—Å —Å–æ–∑–¥–∞–Ω
    w.WriteHeader(http.StatusCreated)
    fmt.Fprintf(w, "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–Ω")
}

func notFoundHandler(w http.ResponseWriter, r *http.Request) {
    // 404 - –Ω–µ –Ω–∞–π–¥–µ–Ω
    w.WriteHeader(http.StatusNotFound)
    fmt.Fprintf(w, "–°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞")
}

func errorHandler(w http.ResponseWriter, r *http.Request) {
    // 500 - –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
    w.WriteHeader(http.StatusInternalServerError)
    fmt.Fprintf(w, "–ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫")
}
```

## –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –≤ –∫–ª–∏–µ–Ω—Ç–µ

```go
package main

import (
    "fmt"
    "io"
    "net/http"
)

func main() {
    urls := []string{
        "http://localhost:8080/ok",
        "http://localhost:8080/notfound", 
        "http://localhost:8080/error",
    }
    
    for _, url := range urls {
        checkStatus(url)
    }
}

func checkStatus(url string) {
    resp, err := http.Get(url)
    if err != nil {
        fmt.Printf("–û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞: %v\n", err)
        return
    }
    defer resp.Body.Close()
    
    body, _ := io.ReadAll(resp.Body)
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å –∫–æ–¥
    switch resp.StatusCode {
    case 200:
        fmt.Printf("‚úÖ %s: %s\n", url, string(body))
    case 404:
        fmt.Printf("‚ùå %s: –ù–µ –Ω–∞–π–¥–µ–Ω - %s\n", url, string(body))
    case 500:
        fmt.Printf("üí• %s: –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ - %s\n", url, string(body))
    default:
        fmt.Printf("‚ùì %s: –°—Ç–∞—Ç—É—Å %d - %s\n", url, resp.StatusCode, string(body))
    }
}
```

## –í–∞–∂–Ω—ã–µ –¥–µ—Ç–∞–ª–∏ –ø—Ä–æ —Å—Ç–∞—Ç—É—Å-–∫–æ–¥—ã

**1. –ü–æ—Ä—è–¥–æ–∫ –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ:**
```go
// –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û - —Å—Ç–∞—Ç—É—Å –ø–æ—Å–ª–µ –∑–∞–ø–∏—Å–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç
fmt.Fprintf(w, "–î–∞–Ω–Ω—ã–µ")
w.WriteHeader(500) // –ë—É–¥–µ—Ç –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–æ!

// –ü–†–ê–í–ò–õ–¨–ù–û
w.WriteHeader(500)
fmt.Fprintf(w, "–û—à–∏–±–∫–∞")
```

**2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π 200:**
```go
func handler(w http.ResponseWriter, r *http.Request) {
    fmt.Fprintf(w, "Hello") // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è 200 OK
}
```

**3. –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
```go
func redirectHandler(w http.ResponseWriter, r *http.Request) {
    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç 302 –∏ Location –∑–∞–≥–æ–ª–æ–≤–æ–∫
    http.Redirect(w, r, "/new-page", http.StatusFound)
}
```

**4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –∫–ª–∏–µ–Ω—Ç–µ - –≤–∞–∂–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã:**
```go
resp, err := http.Get("http://example.com")
if err != nil {
    // –û—à–∏–±–∫–∞ —Å–µ—Ç–∏/–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
    return err
}
defer resp.Body.Close()

if resp.StatusCode >= 400 {
    // –õ—é–±–∞—è –æ—à–∏–±–∫–∞ (4xx –∏–ª–∏ 5xx)
    return fmt.Errorf("HTTP –æ—à–∏–±–∫–∞: %d", resp.StatusCode) 
}

// –¢–æ–ª—å–∫–æ –¥–ª—è 2xx —Å—Ç–∞—Ç—É—Å–æ–≤ —á–∏—Ç–∞–µ–º –¥–∞–Ω–Ω—ã–µ
body, err := io.ReadAll(resp.Body)
```

## –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä - REST API —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —Å—Ç–∞—Ç—É—Å–∞–º–∏

```go
func userHandler(w http.ResponseWriter, r *http.Request) {
    switch r.Method {
    case "GET":
        w.WriteHeader(200) // OK
        fmt.Fprintf(w, `{"id": 1, "name": "–ò–≤–∞–Ω"}`)
        
    case "POST":
        w.WriteHeader(201) // Created
        fmt.Fprintf(w, `{"id": 2, "name": "–ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å"}`)
        
    case "PUT":
        w.WriteHeader(200) // OK (–æ–±–Ω–æ–≤–ª–µ–Ω)
        fmt.Fprintf(w, `{"id": 1, "name": "–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π"}`)
        
    case "DELETE":
        w.WriteHeader(204) // No Content (—É–¥–∞–ª–µ–Ω, –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö)
        
    default:
        w.WriteHeader(405) // Method Not Allowed
        fmt.Fprintf(w, "–ú–µ—Ç–æ–¥ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è")
    }
}
```

---

# JSON –≤ HTTP - –±–∞–∑–æ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

## –û—Å–Ω–æ–≤–Ω–∞—è –∏–¥–µ—è

HTTP –ø–µ—Ä–µ–¥–∞–µ—Ç —Ç–µ–∫—Å—Ç. JSON - —Å–ø–æ—Å–æ–± –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å –æ–±—ä–µ–∫—Ç –≤ —Ç–µ–∫—Å—Ç –∏ –æ–±—Ä–∞—Ç–Ω–æ.

```
–û–±—ä–µ–∫—Ç ‚Üí JSON —Å—Ç—Ä–æ–∫–∞ ‚Üí HTTP ‚Üí JSON —Å—Ç—Ä–æ–∫–∞ ‚Üí –û–±—ä–µ–∫—Ç
```

## –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä —Å–µ—Ä–≤–µ—Ä–∞

```go
type User struct {
    Name string `json:"name"`
}

func handler(w http.ResponseWriter, r *http.Request) {
    var user User
    json.NewDecoder(r.Body).Decode(&user)  // JSON ‚Üí –æ–±—ä–µ–∫—Ç
    
    fmt.Printf("–ü–æ–ª—É—á–∏–ª: %s\n", user.Name)
    
    w.Header().Set("Content-Type", "application/json")
    json.NewEncoder(w).Encode(user)        // –æ–±—ä–µ–∫—Ç ‚Üí JSON
}
```

## –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä –∫–ª–∏–µ–Ω—Ç–∞

```go
user := User{Name: "–ò–≤–∞–Ω"}
jsonData, _ := json.Marshal(user)        // –æ–±—ä–µ–∫—Ç ‚Üí JSON

resp, _ := http.Post("http://localhost:8080", 
    "application/json", 
    bytes.NewBuffer(jsonData))
```

## –ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ

**–í—Å–µ–≥–¥–∞ —É–∫–∞–∑—ã–≤–∞–π Content-Type: application/json** - –∏–Ω–∞—á–µ —Å–µ—Ä–≤–µ—Ä –Ω–µ –ø–æ–π–º–µ—Ç —á—Ç–æ —ç—Ç–æ JSON.

---

# JSON –≤ HTTP - –ø–µ—Ä–µ–¥–∞—á–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

## –ü—Ä–æ–±–ª–µ–º–∞, –∫–æ—Ç–æ—Ä—É—é —Ä–µ—à–∞–µ—Ç JSON

**HTTP –ø–µ—Ä–µ–¥–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç/–±–∞–π—Ç—ã. –ê –∫–∞–∫ –ø–µ—Ä–µ–¥–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ?**

**–ü–ª–æ—Ö–æ - –≤—Å–µ –≤ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ:**
```
GET /user?id=1&name=–ò–≤–∞–Ω&email=ivan@test.com&age=25&city=–ú–æ—Å–∫–≤–∞
```

**–•–æ—Ä–æ—à–æ - —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
```json
{
  "id": 1,
  "name": "–ò–≤–∞–Ω", 
  "email": "ivan@test.com",
  "age": 25,
  "city": "–ú–æ—Å–∫–≤–∞"
}
```

## Content-Type –¥–ª—è JSON

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö:**
```
POST /users HTTP/1.1
Content-Type: application/json

{"name": "–ò–≤–∞–Ω", "email": "ivan@test.com"}
```

**–ë–µ–∑ Content-Type —Å–µ—Ä–≤–µ—Ä –Ω–µ –ø–æ–π–º–µ—Ç —á—Ç–æ —ç—Ç–æ JSON!**

## –ü—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä - —Å–µ—Ä–≤–µ—Ä –ø—Ä–∏–Ω–∏–º–∞–µ—Ç JSON

```go
package main

import (
    "encoding/json"
    "fmt"
    "net/http"
)

type User struct {
    ID    int    `json:"id"`
    Name  string `json:"name"`
    Email string `json:"email"`
}

func createUserHandler(w http.ResponseWriter, r *http.Request) {
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º Content-Type
    if r.Header.Get("Content-Type") != "application/json" {
        w.WriteHeader(400)
        fmt.Fprintf(w, "–ù—É–∂–µ–Ω Content-Type: application/json")
        return
    }
    
    // –î–µ–∫–æ–¥–∏—Ä—É–µ–º JSON –∏–∑ —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞
    var user User
    err := json.NewDecoder(r.Body).Decode(&user)
    if err != nil {
        w.WriteHeader(400)
        fmt.Fprintf(w, "–û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ JSON: %v", err)
        return
    }
    
    // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ
    user.ID = 123 // –ü—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º ID
    fmt.Printf("–ü–æ–ª—É—á–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: %+v\n", user)
    
    // –í–æ–∑–≤—Ä–∞—â–∞–µ–º JSON –æ—Ç–≤–µ—Ç
    w.Header().Set("Content-Type", "application/json")
    w.WriteHeader(201)
    json.NewEncoder(w).Encode(user)
}

func main() {
    http.HandleFunc("/users", createUserHandler)
    fmt.Println("–°–µ—Ä–≤–µ—Ä –Ω–∞ :8080")
    http.ListenAndServe(":8080", nil)
}
```

## –ü—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä - –∫–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç JSON

```go
package main

import (
    "bytes"
    "encoding/json"
    "fmt"
    "io"
    "net/http"
)

type User struct {
    ID    int    `json:"id"`
    Name  string `json:"name"`
    Email string `json:"email"`
}

func main() {
    // –°–æ–∑–¥–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    user := User{
        Name:  "–ü–µ—Ç—Ä",
        Email: "petr@test.com",
    }
    
    // –°–µ—Ä–∏–∞–ª–∏–∑—É–µ–º –≤ JSON
    jsonData, err := json.Marshal(user)
    if err != nil {
        panic(err)
    }
    
    fmt.Printf("–û—Ç–ø—Ä–∞–≤–ª—è–µ–º JSON: %s\n", jsonData)
    
    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º POST –∑–∞–ø—Ä–æ—Å
    resp, err := http.Post(
        "http://localhost:8080/users",
        "application/json",           // Content-Type
        bytes.NewBuffer(jsonData),    // –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞
    )
    if err != nil {
        panic(err)
    }
    defer resp.Body.Close()
    
    // –ß–∏—Ç–∞–µ–º –æ—Ç–≤–µ—Ç
    body, _ := io.ReadAll(resp.Body)
    fmt.Printf("–°—Ç–∞—Ç—É—Å: %d\n", resp.StatusCode)
    fmt.Printf("–û—Ç–≤–µ—Ç: %s\n", body)
    
    // –ü–∞—Ä—Å–∏–º JSON –æ—Ç–≤–µ—Ç
    var createdUser User
    json.Unmarshal(body, &createdUser)
    fmt.Printf("–°–æ–∑–¥–∞–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å ID: %d\n", createdUser.ID)
}
```

## –í–∞–∂–Ω—ã–µ –¥–µ—Ç–∞–ª–∏ JSON –≤ HTTP

**1. json.NewDecoder vs json.Unmarshal:**
```go
// –î–ª—è HTTP —Ç–µ–ª–∞ - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Decoder (—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ)
var user User
json.NewDecoder(r.Body).Decode(&user)

// –î–ª—è –≥–æ—Ç–æ–≤—ã—Ö –±–∞–π—Ç–æ–≤ - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Unmarshal
var user User  
json.Unmarshal(jsonBytes, &user)
```

**2. JSON —Ç–µ–≥–∏ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ö:**
```go
type User struct {
    ID       int    `json:"id"`                    // –æ–±—ã—á–Ω–æ–µ –ø–æ–ª–µ
    Name     string `json:"name"`                  
    Email    string `json:"email"`
    Password string `json:"password,omitempty"`    // –Ω–µ –≤–∫–ª—é—á–∞—Ç—å –µ—Å–ª–∏ –ø—É—Å—Ç–æ–µ
    Secret   string `json:"-"`                     // –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –≤–∫–ª—é—á–∞—Ç—å –≤ JSON
    Age      int    `json:"age,string"`            // —á–∏—Å–ª–æ –∫–∞–∫ —Å—Ç—Ä–æ–∫–∞ –≤ JSON
}
```

**3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ JSON:**
```go
func parseJSON(r *http.Request) (*User, error) {
    var user User
    
    // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞ (–∑–∞—â–∏—Ç–∞ –æ—Ç –±–æ–ª—å—à–∏—Ö JSON)
    r.Body = http.MaxBytesReader(nil, r.Body, 1048576) // 1MB
    
    decoder := json.NewDecoder(r.Body)
    decoder.DisallowUnknownFields() // –û—à–∏–±–∫–∞ –ø—Ä–∏ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –ø–æ–ª—è—Ö
    
    err := decoder.Decode(&user)
    if err != nil {
        return nil, fmt.Errorf("–æ—à–∏–±–∫–∞ JSON: %v", err)
    }
    
    return &user, nil
}
```

**4. –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏ Content-Type:**
```go
// –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û - –∑–∞–±—ã–ª–∏ Content-Type
http.Post("http://example.com/api", "", jsonData)

// –ü–†–ê–í–ò–õ–¨–ù–û
http.Post("http://example.com/api", "application/json", jsonData)

// –ò–ª–∏ —á–µ—Ä–µ–∑ Request:
req.Header.Set("Content-Type", "application/json; charset=utf-8")
```

## –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä - –ø–æ–ª–Ω—ã–π CRUD —Å JSON

```go
package main

import (
    "encoding/json"
    "fmt"
    "net/http"
    "strconv"
    "strings"
)

type User struct {
    ID    int    `json:"id"`
    Name  string `json:"name"`
    Email string `json:"email"`
}

var users = make(map[int]User)
var nextID = 1

func usersHandler(w http.ResponseWriter, r *http.Request) {
    w.Header().Set("Content-Type", "application/json")
    
    switch r.Method {
    case "GET":
        // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        userList := make([]User, 0, len(users))
        for _, user := range users {
            userList = append(userList, user)
        }
        json.NewEncoder(w).Encode(userList)
        
    case "POST":
        // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        var user User
        if err := json.NewDecoder(r.Body).Decode(&user); err != nil {
            w.WriteHeader(400)
            json.NewEncoder(w).Encode(map[string]string{"error": "–ù–µ–≤–µ—Ä–Ω—ã–π JSON"})
            return
        }
        
        user.ID = nextID
        users[nextID] = user
        nextID++
        
        w.WriteHeader(201)
        json.NewEncoder(w).Encode(user)
    }
}

func userHandler(w http.ResponseWriter, r *http.Request) {
    w.Header().Set("Content-Type", "application/json")
    
    // –ò–∑–≤–ª–µ–∫–∞–µ–º ID –∏–∑ URL
    idStr := strings.TrimPrefix(r.URL.Path, "/users/")
    id, err := strconv.Atoi(idStr)
    if err != nil {
        w.WriteHeader(400)
        json.NewEncoder(w).Encode(map[string]string{"error": "–ù–µ–≤–µ—Ä–Ω—ã–π ID"})
        return
    }
    
    switch r.Method {
    case "GET":
        user, exists := users[id]
        if !exists {
            w.WriteHeader(404)
            json.NewEncoder(w).Encode(map[string]string{"error": "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω"})
            return
        }
        json.NewEncoder(w).Encode(user)
        
    case "DELETE":
        if _, exists := users[id]; !exists {
            w.WriteHeader(404)
            json.NewEncoder(w).Encode(map[string]string{"error": "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω"})
            return
        }
        delete(users, id)
        w.WriteHeader(204) // No Content
    }
}

func main() {
    // –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    users[1] = User{ID: 1, Name: "–ò–≤–∞–Ω", Email: "ivan@test.com"}
    nextID = 2
    
    http.HandleFunc("/users", usersHandler)
    http.HandleFunc("/users/", userHandler)
    
    fmt.Println("JSON API —Å–µ—Ä–≤–µ—Ä –Ω–∞ :8080")
    fmt.Println("GET  /users     - —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π")
    fmt.Println("POST /users     - —Å–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è")  
    fmt.Println("GET  /users/1   - –ø–æ–ª—É—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è")
    fmt.Println("DELETE /users/1 - —É–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è")
    
    http.ListenAndServe(":8080", nil)
}
```

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å curl:**
```bash
# –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
curl http://localhost:8080/users

# –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è  
curl -X POST -H "Content-Type: application/json" \
     -d '{"name":"–ú–∞—Ä–∏—è","email":"maria@test.com"}' \
     http://localhost:8080/users

# –ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID
curl http://localhost:8080/users/1
```

---

# –§–æ—Ä–º—ã –≤ HTTP - –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ JSON

## –ü—Ä–æ–±–ª–µ–º–∞, –∫–æ—Ç–æ—Ä—É—é —Ä–µ—à–∞—é—Ç —Ñ–æ—Ä–º—ã

JSON - —ç—Ç–æ –¥–ª—è API –º–µ–∂–¥—É –ø—Ä–æ–≥—Ä–∞–º–º–∞–º–∏. –ù–æ —á—Ç–æ –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –≤–≤–æ–¥–∏—Ç —á–µ–ª–æ–≤–µ–∫ –≤ –±—Ä–∞—É–∑–µ—Ä–µ?

**HTML —Ñ–æ—Ä–º–∞:**
```html
<form method="POST" action="/submit">
    <input type="text" name="username" value="ivan">
    <input type="password" name="password" value="secret">
    <button type="submit">–í–æ–π—Ç–∏</button>
</form>
```

**–ü—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ HTTP –∑–∞–ø—Ä–æ—Å:**
```
POST /submit HTTP/1.1
Content-Type: application/x-www-form-urlencoded

username=ivan&password=secret
```

## –ö–ª—é—á–µ–≤—ã–µ –æ—Ç–ª–∏—á–∏—è –æ—Ç JSON

**JSON:**
```
Content-Type: application/json
{"username": "ivan", "password": "secret"}
```

**–§–æ—Ä–º–∞:**
```
Content-Type: application/x-www-form-urlencoded
username=ivan&password=secret
```

## –ü—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä - —Å–µ—Ä–≤–µ—Ä –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ñ–æ—Ä–º—É

```go
func loginHandler(w http.ResponseWriter, r *http.Request) {
    if r.Method == "GET" {
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É
        fmt.Fprintf(w, `
        <form method="POST">
            <input name="username" placeholder="–õ–æ–≥–∏–Ω">
            <input name="password" type="password" placeholder="–ü–∞—Ä–æ–ª—å">
            <button type="submit">–í–æ–π—Ç–∏</button>
        </form>`)
        return
    }
    
    // –ü–∞—Ä—Å–∏–º —Ñ–æ—Ä–º—É
    r.ParseForm()
    
    username := r.FormValue("username")
    password := r.FormValue("password")
    
    fmt.Fprintf(w, "–õ–æ–≥–∏–Ω: %s, –ü–∞—Ä–æ–ª—å: %s", username, password)
}
```

## –ü—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä - –∫–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–æ—Ä–º—É

```go
data := url.Values{}
data.Set("username", "ivan")
data.Set("password", "secret")

resp, _ := http.Post("http://localhost:8080/login",
    "application/x-www-form-urlencoded",
    strings.NewReader(data.Encode()))
```

## –í–∞–∂–Ω—ã–µ –¥–µ—Ç–∞–ª–∏

**1. –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å ParseForm():**
```go
r.ParseForm()                    // –ë–µ–∑ —ç—Ç–æ–≥–æ FormValue –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
username := r.FormValue("username")
```

**2. URL encoding:**
```
–ü—Ä–æ–±–µ–ª—ã ‚Üí +
–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã ‚Üí %XX
ivan petrov ‚Üí ivan+petrov
```

---

# –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ - multipart/form-data

## –ü—Ä–æ–±–ª–µ–º–∞

–û–±—ã—á–Ω—ã–µ —Ñ–æ—Ä–º—ã –ø–µ—Ä–µ–¥–∞—é—Ç —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç. –ê –∫–∞–∫ –ø–µ—Ä–µ–¥–∞—Ç—å —Ñ–∞–π–ª?

**–ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```
Content-Type: application/x-www-form-urlencoded
filename=photo.jpg&content=BINARY_DATA_HERE???
```

**–†–µ—à–µ–Ω–∏–µ - multipart:**
```
Content-Type: multipart/form-data; boundary=----1234

------1234
Content-Disposition: form-data; name="username"

ivan
------1234  
Content-Disposition: form-data; name="file"; filename="photo.jpg"
Content-Type: image/jpeg

[BINARY DATA OF FILE]
------1234--
```

## HTML —Ñ–æ—Ä–º–∞ –¥–ª—è —Ñ–∞–π–ª–æ–≤

```html
<form method="POST" enctype="multipart/form-data" action="/upload">
    <input type="text" name="description" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ">
    <input type="file" name="file">
    <button type="submit">–ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
</form>
```

**–ö–ª—é—á–µ–≤–æ–µ:** `enctype="multipart/form-data"`

## –ü—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä - —Å–µ—Ä–≤–µ—Ä –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ñ–∞–π–ª

```go
func uploadHandler(w http.ResponseWriter, r *http.Request) {
    if r.Method == "GET" {
        fmt.Fprintf(w, `
        <form method="POST" enctype="multipart/form-data">
            <input name="description" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ">
            <input name="file" type="file">
            <button type="submit">–ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
        </form>`)
        return
    }
    
    // –ü–∞—Ä—Å–∏–º multipart form (–ª–∏–º–∏—Ç 10MB)
    r.ParseMultipartForm(10 << 20)
    
    // –ü–æ–ª—É—á–∞–µ–º –æ–±—ã—á–Ω–æ–µ –ø–æ–ª–µ
    description := r.FormValue("description")
    
    // –ü–æ–ª—É—á–∞–µ–º —Ñ–∞–π–ª
    file, header, err := r.FormFile("file")
    if err != nil {
        fmt.Fprintf(w, "–û—à–∏–±–∫–∞: %v", err)
        return
    }
    defer file.Close()
    
    fmt.Fprintf(w, "–§–∞–π–ª: %s, –†–∞–∑–º–µ—Ä: %d, –û–ø–∏—Å–∞–Ω–∏–µ: %s", 
        header.Filename, header.Size, description)
}
```

## –ü—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä - –∫–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–∞–π–ª

```go
func uploadFile() {
    // –°–æ–∑–¥–∞–µ–º multipart writer
    var b bytes.Buffer
    writer := multipart.NewWriter(&b)
    
    // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—ã—á–Ω–æ–µ –ø–æ–ª–µ
    writer.WriteField("description", "–ú–æ–µ —Ñ–æ—Ç–æ")
    
    // –î–æ–±–∞–≤–ª—è–µ–º —Ñ–∞–π–ª
    fileWriter, _ := writer.CreateFormFile("file", "test.txt")
    fileWriter.Write([]byte("–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞"))
    
    writer.Close()
    
    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º
    resp, _ := http.Post("http://localhost:8080/upload",
        writer.FormDataContentType(),  // Content-Type —Å boundary
        &b)
    
    defer resp.Body.Close()
}
```

## –ö–ª—é—á–µ–≤—ã–µ –¥–µ—Ç–∞–ª–∏

**1. –õ–∏–º–∏—Ç—ã —Ä–∞–∑–º–µ—Ä–∞:**
```go
r.ParseMultipartForm(10 << 20)  // 10MB –ª–∏–º–∏—Ç
```

**2. Boundary –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
```go
writer.FormDataContentType()  // "multipart/form-data; boundary=..."
```

**3. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ –Ω–∞ –¥–∏—Å–∫:**
```go
file, header, _ := r.FormFile("file")
dst, _ := os.Create(header.Filename)
io.Copy(dst, file)  // –ö–æ–ø–∏—Ä—É–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
```

---

# Middleware - –æ–±—â–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

## –ü—Ä–æ–±–ª–µ–º–∞

–£ —Ç–µ–±—è –µ—Å—Ç—å 10 API endpoints. –ò –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –Ω—É–∂–Ω–æ:
- –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é  
- –î–æ–±–∞–≤–∏—Ç—å CORS –∑–∞–≥–æ–ª–æ–≤–∫–∏

**–ü–ª–æ—Ö–æ - –∫–æ–ø–∏–ø–∞—Å—Ç–∞ –≤ –∫–∞–∂–¥–æ–º handler:**
```go
func handler1(w http.ResponseWriter, r *http.Request) {
    log.Printf("–ó–∞–ø—Ä–æ—Å: %s", r.URL)        // –ü–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è
    if !checkAuth(r) { return }            // –ü–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è  
    w.Header().Set("Access-Control-Allow-Origin", "*")  // –ü–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è
    
    // –†–µ–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ handler
}

func handler2(w http.ResponseWriter, r *http.Request) {
    log.Printf("–ó–∞–ø—Ä–æ—Å: %s", r.URL)        // –ü–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è
    if !checkAuth(r) { return }            // –ü–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è
    w.Header().Set("Access-Control-Allow-Origin", "*")  // –ü–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è
    
    // –†–µ–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ handler
}
```

## –†–µ—à–µ–Ω–∏–µ - Middleware

**Middleware = —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è "–æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç" handler –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –æ–±—â—É—é –ª–æ–≥–∏–∫—É.**

## –ü—Ä–æ—Å—Ç–µ–π—à–∏–π –ø—Ä–∏–º–µ—Ä

```go
func loggingMiddleware(next http.Handler) http.Handler {
    return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
        log.Printf("–ó–∞–ø—Ä–æ—Å: %s %s", r.Method, r.URL.Path)
        next.ServeHTTP(w, r)  // –í—ã–∑—ã–≤–∞–µ–º —Å–ª–µ–¥—É—é—â–∏–π handler
    })
}

func myHandler(w http.ResponseWriter, r *http.Request) {
    fmt.Fprintf(w, "–ü—Ä–∏–≤–µ—Ç!")
}

func main() {
    // –û–±–æ—Ä–∞—á–∏–≤–∞–µ–º handler –≤ middleware
    http.Handle("/", loggingMiddleware(http.HandlerFunc(myHandler)))
    http.ListenAndServe(":8080", nil)
}
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
1. –ó–∞–ø—Ä–æ—Å –ø—Ä–∏—Ö–æ–¥–∏—Ç –≤ loggingMiddleware
2. Middleware –ª–æ–≥–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å
3. Middleware –≤—ã–∑—ã–≤–∞–µ—Ç myHandler —á–µ—Ä–µ–∑ next.ServeHTTP()
4. myHandler –æ—Ç—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç–≤–µ—Ç

## –¶–µ–ø–æ—á–∫–∞ middleware

```go
func authMiddleware(next http.Handler) http.Handler {
    return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
        token := r.Header.Get("Authorization")
        if token != "Bearer secret" {
            http.Error(w, "–ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞", 401)
            return
        }
        next.ServeHTTP(w, r)
    })
}

func corsMiddleware(next http.Handler) http.Handler {
    return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
        w.Header().Set("Access-Control-Allow-Origin", "*")
        next.ServeHTTP(w, r)
    })
}

func main() {
    handler := http.HandlerFunc(myHandler)
    
    // –¶–µ–ø–æ—á–∫–∞: logging ‚Üí auth ‚Üí cors ‚Üí myHandler
    wrappedHandler := loggingMiddleware(authMiddleware(corsMiddleware(handler)))
    
    http.Handle("/protected", wrappedHandler)
    http.ListenAndServe(":8080", nil)
}
```

## –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä - API —Å middleware

```go
func timeMiddleware(next http.Handler) http.Handler {
    return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
        start := time.Now()
        next.ServeHTTP(w, r)
        log.Printf("–ó–∞–ø—Ä–æ—Å –≤—ã–ø–æ–ª–Ω–µ–Ω –∑–∞ %v", time.Since(start))
    })
}

func jsonMiddleware(next http.Handler) http.Handler {
    return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
        w.Header().Set("Content-Type", "application/json")
        next.ServeHTTP(w, r)
    })
}

func apiHandler(w http.ResponseWriter, r *http.Request) {
    fmt.Fprintf(w, `{"message": "API —Ä–∞–±–æ—Ç–∞–µ—Ç", "time": "%s"}`, time.Now().Format("15:04:05"))
}

func main() {
    handler := http.HandlerFunc(apiHandler)
    
    // –í—Å–µ API endpoint –±—É–¥—É—Ç –∏–º–µ—Ç—å JSON Content-Type –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏
    wrappedHandler := timeMiddleware(jsonMiddleware(handler))
    
    http.Handle("/api", wrappedHandler)
    
    fmt.Println("–°–µ—Ä–≤–µ—Ä –Ω–∞ :8080")
    http.ListenAndServe(":8080", nil)
}
```

## –ì–ª–∞–≤–Ω–∞—è –∏–¥–µ—è

**Middleware –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –æ–±—â—É—é –ª–æ–≥–∏–∫—É –∫–æ –≤—Å–µ–º handlers –±–µ–∑ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞.**

–¢–∏–ø–∏—á–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è/–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è  
- CORS –∑–∞–≥–æ–ª–æ–≤–∫–∏
- –ò–∑–º–µ—Ä–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ rate limit

---

