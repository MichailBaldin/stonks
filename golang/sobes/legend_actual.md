# üëã "–†–ê–°–°–ö–ê–ñ–ò –û –°–ï–ë–ï"

## **–ö—Ä–∞—Ç–∫–∏–π –æ—Ç–≤–µ—Ç (1-2 –º–∏–Ω—É—Ç—ã):**

–ü—Ä–∏–≤–µ—Ç! –Ø Go —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ —Å 3.5 –≥–æ–¥–∞–º–∏ –æ–ø—ã—Ç–∞. –í—Å—ë —ç—Ç–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç–∞–ª –≤ –æ–¥–Ω–æ–º –±–æ–ª—å—à–æ–º –ø—Ä–æ–µ–∫—Ç–µ - —Å–∏—Å—Ç–µ–º–µ —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ—à–∏–≤–æ–∫ –¥–ª—è —Å–∞–º–æ—Å–≤–∞–ª–æ–≤ –ö–ê–ú–ê–ó.

**–ù–∞—á–∏–Ω–∞–ª –¥–∂—É–Ω–∏–æ—Ä–æ–º** - –ø–∏—Å–∞–ª –ø—Ä–æ—Å—Ç—ã–µ CRUD API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏—è–º–∏ –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ. –ò–∑—É—á–∞–ª –æ—Å–Ω–æ–≤—ã: gRPC, PostgreSQL, –∫–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥.

**–ß–µ—Ä–µ–∑ –ø–æ–ª—Ç–æ—Ä–∞ –≥–æ–¥–∞** –ø–µ—Ä–µ—à–µ–ª –Ω–∞ –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏ - –æ–±—Ä–∞–±–æ—Ç–∫—É –≤—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞ —Å–æ–±—ã—Ç–∏–π –æ—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤ —á–µ—Ä–µ–∑ Kafka. –ó–¥–µ—Å—å —É–∂–µ —Ä–∞–∑–±–∏—Ä–∞–ª—Å—è —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é, –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å—é, –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å—é. –°–∏—Å—Ç–µ–º–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∞ –±–æ–ª–µ–µ 1000 —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –º–∏–Ω—É—Ç—É –æ—Ç 500+ —Å–∞–º–æ—Å–≤–∞–ª–æ–≤ –≤ –∫–∞—Ä—å–µ—Ä–∞—Ö.

**–ö –∫–æ–Ω—Ü—É –ø—Ä–æ–µ–∫—Ç–∞** –¥–µ–ª–∞–ª —É–∂–µ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏ - –∞–Ω–∞–ª–∏—Ç–∏–∫—É, –æ—Ç—á–µ—Ç—ã, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏. –ü–æ—Å—Ç—Ä–æ–∏–ª ETL –ø–∞–π–ø–ª–∞–π–Ω—ã –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ PDF –æ—Ç—á–µ—Ç–æ–≤ –¥–ª—è –º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç–∞ –ö–ê–ú–ê–ó.

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –≤—ã—Ä–æ—Å—Å –æ—Ç –¥–∂—É–Ω–∞ –¥–æ –º–∏–¥–∞** - –∏–∑—É—á–∏–ª event-driven –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É, –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã, —Ä–µ—à–∞–ª —Å–ª–æ–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏ —Å distributed systems. –ë—ã–ª –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ—Ä—å–µ–∑–Ω—ã—Ö —Ñ–∞–∫–∞–ø–æ–≤ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ, –Ω–æ –∫–∞–∂–¥—ã–π –Ω–∞—É—á–∏–ª —á–µ–º—É-—Ç–æ –≤–∞–∂–Ω–æ–º—É.

**–ü—Ä–æ–µ–∫—Ç –∑–∞–≤–µ—Ä—à–∏–ª—Å—è**, –∫–æ–º–∞–Ω–¥–∞ —Ä–∞—Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–ª–∞—Å—å. –ò—â—É –Ω–æ–≤—ã–µ –≤—ã–∑–æ–≤—ã –≥–¥–µ —Å–º–æ–≥—É –ø—Ä–∏–º–µ–Ω–∏—Ç—å –æ–ø—ã—Ç —Å Kafka, PostgreSQL –∏ Go, –Ω–æ —É–∂–µ –≤ –¥—Ä—É–≥–æ–π –ø—Ä–µ–¥–º–µ—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏. –•–æ—á–µ—Ç—Å—è –ø–æ—Ä–∞–±–æ—Ç–∞—Ç—å –≤ –∫–æ–º–∞–Ω–¥–µ –≥–¥–µ –µ—Å—Ç—å —Å–µ–Ω–∏–æ—Ä—ã, —É –∫–æ—Ç–æ—Ä—ã—Ö –º–æ–∂–Ω–æ —É—á–∏—Ç—å—Å—è –¥–∞–ª—å—à–µ.

---

## **–ï—Å–ª–∏ –ø–æ–ø—Ä–æ—Å—è—Ç –ø–æ–¥—Ä–æ–±–Ω–µ–µ –ø—Ä–æ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:**

_"–û—Å–Ω–æ–≤–Ω–æ–π —Å—Ç–µ–∫ - Go, gRPC, PostgreSQL, Kafka. –†–∞–±–æ—Ç–∞–ª —Å event-driven –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π, outbox pattern –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–∏ —Å–æ–±—ã—Ç–∏–π, optimistic locking –¥–ª—è concurrent updates. –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–ª Kafka consumer groups –¥–ª—è high-throughput –æ–±—Ä–∞–±–æ—Ç–∫–∏. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª Redis –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —á–µ—Ä–µ–∑ Prometheus –∏ Grafana."_

## **–ï—Å–ª–∏ —Å–ø—Ä–æ—Å—è—Ç –ø—Ä–æ —Å–∞–º–æ–µ —Å–ª–æ–∂–Ω–æ–µ:**

_"–ù–∞–≤–µ—Ä–Ω–æ–µ, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π –≤ Kafka. –ù—É–∂–Ω–æ –±—ã–ª–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞–∑–±–∏—Ç—å –Ω–∞ –ø–∞—Ä—Ç–∏—Ü–∏–∏, –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å consumer groups, –æ–±–µ—Å–ø–µ—á–∏—Ç—å –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –∏ –ø—Ä–∏ —ç—Ç–æ–º –Ω–µ –ø–æ—Ç–µ—Ä—è—Ç—å –Ω–∏ –æ–¥–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è. –ü–ª—é—Å –æ—Ç–ª–∞–¥–∫–∞ deadlock'–∞ –≤ production - —Ç–∞–º –ø—Ä–∏—à–ª–æ—Å—å –≥–ª—É–±–æ–∫–æ —Ä–∞–∑–±–∏—Ä–∞—Ç—å—Å—è —Å –≥–æ—Ä—É—Ç–∏–Ω–∞–º–∏ –∏ profiling'–æ–º."_

## **–ú–æ—Ç–∏–≤–∞—Ü–∏—è –¥–ª—è –Ω–æ–≤–æ–π —Ä–∞–±–æ—Ç—ã:**

_"–•–æ—á–µ—Ç—Å—è —Ä–∞—Å—Ç–∏ –¥–∞–ª—å—à–µ, –∏–∑—É—á–∞—Ç—å –Ω–æ–≤—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏ –ø–∞—Ç—Ç–µ—Ä–Ω—ã. –í —Ç–µ–∫—É—â–µ–º –ø—Ä–æ–µ–∫—Ç–µ –æ—Å–≤–æ–∏–ª event-driven –ø–æ–¥—Ö–æ–¥, –Ω–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –¥—Ä—É–≥–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è. –ü–ª—é—Å —Ö–æ—á–µ—Ç—Å—è –ø–æ—Ä–∞–±–æ—Ç–∞—Ç—å –≤ –∫–æ–º–∞–Ω–¥–µ –≥–¥–µ –µ—Å—Ç—å –æ–ø—ã—Ç–Ω—ã–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ - –≤—Å–µ–≥–¥–∞ –µ—Å—Ç—å —á–µ–º—É —É—á–∏—Ç—å—Å—è."_

# **–ö–æ–º–∞–Ω–¥–∞:**

- **TeamLead & –ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä:** –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, –∫–ª—é—á–µ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è, –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è.
- **PM:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∞–º–∏, —Å—Ä–æ–∫–∞–º–∏, –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è —Å –∑–∞–∫–∞–∑—á–∏–∫–æ–º.
- **Embedded-–∏–Ω–∂–µ–Ω–µ—Ä:** –†–∞–±–æ—Ç–∞ —Å CAN-—à–∏–Ω–æ–π, –ø—Ä–æ—à–∏–≤–∫–∏ MCU, —à–ª—é–∑ –Ω–∞ Jetson (–≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –±–æ—Ä—Ç–æ–º).
- **5 Backend-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ (Go):** –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤ –±—ç–∫–µ–Ω–¥–∞. –Ø –±—ã–ª –æ–¥–Ω–∏–º –∏–∑ –Ω–∏—Ö, –ø—Ä–∏—à–µ–ª Junior, –∫ –∫–æ–Ω—Ü—É –ø—Ä–æ–µ–∫—Ç–∞ - —É–≤–µ—Ä–µ–Ω–Ω—ã–π Mid.
- **DevOps:** –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (Docker, k8s?), CI/CD, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (Prometheus/Grafana), —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ MinIO/Kafka.

# üèóÔ∏è –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –ö–ê–ú–ê–ó OTA –°–ò–°–¢–ï–ú–´

## üìã **–û–ë–©–ê–Ø –°–¢–†–£–ö–¢–£–†–ê –ü–û –°–õ–û–Ø–ú**

### **External Users**

- **–û–ø–µ—Ä–∞—Ç–æ—Ä—ã –ö–ê–ú–ê–ó** - –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã
- **–°–∏—Å—Ç–µ–º–Ω—ã–µ API** - –≤–Ω–µ—à–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (ERP, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∞–≤—Ç–æ–ø–∞—Ä–∫–∞)
- **–ò–Ω–∂–µ–Ω–µ—Ä—ã** - —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### **UI Layer**

- **Web UI Dashboard** - –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤

### **API Layer**

- **API Gateway** - –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è, rate limiting, load balancing
- **Redis (Sessions)** - JWT —Ç–æ–∫–µ–Ω—ã, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å–µ—Å—Å–∏–∏

### **Business Logic** (3 –∫–ª–∞—Å—Ç–µ—Ä–∞)

- **Job Management Cluster** üî•
- **Device Communication Cluster** üî•
- **Analytics & Testing Cluster**

### **Message Bus**

- **Apache Kafka** - event-driven –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–µ–∂–¥—É –≤—Å–µ–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏

### **Data Layer**

- **Shared Data Infrastructure** - PostgreSQL, MinIO, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥, etc.

### **External Systems**

- **MQTT Broker** - —Å–≤—è–∑—å —Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏
- **–ö–ê–ú–ê–ó –°–∞–º–æ—Å–≤–∞–ª—ã** - 500+ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –≤ –∫–∞—Ä—å–µ—Ä–∞—Ö
- **–ö–ê–ú–ê–ó ERP** - –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã

---

## üî• **JOB MANAGEMENT CLUSTER** (–º–æ–π –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–æ–∫—É—Å)

### **Job Service**

- **–ó–∞–¥–∞—á–∞:** –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏—è–º–∏ –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- **–§—É–Ω–∫—Ü–∏–∏:** CRUD API, –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∞–≤–∏–ª, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –∑–∞–¥–∞–Ω–∏–π
- **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:** Go, gRPC, PostgreSQL (pgx)
- **–ü–∞—Ç—Ç–µ—Ä–Ω—ã:** Outbox pattern, Optimistic locking
- **–ú–æ–π –≤–∫–ª–∞–¥:** üî• –û—Å–Ω–æ–≤–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ (Junior ‚Üí Mid)

### **Scheduler**

- **–ó–∞–¥–∞—á–∞:** –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏–π –ø–æ –≤—Ä–µ–º–µ–Ω–∏
- **–§—É–Ω–∫—Ü–∏–∏:** Cron expressions, timezone handling, –º–∞—Å—Å–æ–≤—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:** Go, Redis –¥–ª—è –∫–µ—à–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–π
- **–ú–æ–π –≤–∫–ª–∞–¥:** –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Kafka, timezone handling

### **PostgreSQL Primary**

- **–ó–∞–¥–∞—á–∞:** –û—Å–Ω–æ–≤–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö –∫–ª–∞—Å—Ç–µ—Ä–∞
- **–î–∞–Ω–Ω—ã–µ:** jobs, devices, firmwares, event_outbox
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:** ACID —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –º–∏–≥—Ä–∞—Ü–∏–∏ golang-migrate

### **Outbox Worker**

- **–ó–∞–¥–∞—á–∞:** –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø—É–±–ª–∏–∫–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π –≤ Kafka
- **–§—É–Ω–∫—Ü–∏–∏:** –ß—Ç–µ–Ω–∏–µ outbox —Ç–∞–±–ª–∏—Ü—ã, –ø—É–±–ª–∏–∫–∞—Ü–∏—è, retry –ª–æ–≥–∏–∫–∞
- **–ü–∞—Ç—Ç–µ—Ä–Ω:** Transactional outbox –¥–ª—è exactly-once —Å–µ–º–∞–Ω—Ç–∏–∫–∏

### **Redis (Schedule Cache)**

- **–ó–∞–¥–∞—á–∞:** –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–π –∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–∫
- **–§—É–Ω–∫—Ü–∏–∏:** –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ cron data, TTL —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

---

## üî• **DEVICE COMMUNICATION CLUSTER** (–º–æ–π –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–æ–∫—É—Å)

### **Dispatcher**

- **–ó–∞–¥–∞—á–∞:** –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–º–∞–Ω–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º
- **–§—É–Ω–∫—Ü–∏–∏:** –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥, MQTT publishing, retry –ª–æ–≥–∏–∫–∞
- **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:** Go, MQTT client, MinIO integration
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:** Circuit breaker, presigned URLs

### **Event Processor**

- **–ó–∞–¥–∞—á–∞:** –í—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç–∞—Ç—É—Å–æ–≤ –æ—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- **–§—É–Ω–∫—Ü–∏–∏:** Kafka consumer, –ø–∞—Ä—Å–∏–Ω–≥ —Å–æ–æ–±—â–µ–Ω–∏–π, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤
- **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:** Go, Kafka (sarama), Redis –¥–ª—è –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** 1000+ —Å–æ–æ–±—â–µ–Ω–∏–π/–º–∏–Ω—É—Ç—É, 50 –ø–∞—Ä—Ç–∏—Ü–∏–π
- **–ú–æ–π –≤–∫–ª–∞–¥:** üî• –û—Å–Ω–æ–≤–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ (–≠—Ç–∞–ø 2)

### **MinIO Storage**

- **–ó–∞–¥–∞—á–∞:** S3-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –ø—Ä–æ—à–∏–≤–æ–∫
- **–§—É–Ω–∫—Ü–∏–∏:** –ë–∏–Ω–∞—Ä–Ω–∏–∫–∏ firmware, presigned URLs, –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:** –° Dispatcher –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å—Å—ã–ª–æ–∫ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è

### **Redis (Message Cache)**

- **–ó–∞–¥–∞—á–∞:** –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏
- **–§—É–Ω–∫—Ü–∏–∏:** –î–µ–¥—É–±–ª–∏–∫–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π, –≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤

### **Kafka Consumer Groups**

- **command-dispatcher-group:** 5 –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ –¥–ª—è –∫–æ–º–∞–Ω–¥
- **status-processor-group:** 10 –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ –¥–ª—è —Å—Ç–∞—Ç—É—Å–æ–≤ (–≤—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞)
- **telemetry-collector-group:** 3 –∏–Ω—Å—Ç–∞–Ω—Å–∞ –¥–ª—è —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏

---

## üìä **ANALYTICS & TESTING CLUSTER** (–≠—Ç–∞–ø 3)

### **Reporting Service**

- **–ó–∞–¥–∞—á–∞:** –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤
- **–§—É–Ω–∫—Ü–∏–∏:** ETL –ø—Ä–æ—Ü–µ—Å—Å—ã, PDF/CSV generation, REST API
- **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:** Go, PostgreSQL read replica, –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è PDF
- **–ú–æ–π –≤–∫–ª–∞–¥:** –°—Ö–µ–º–∞ —Ç–∞–±–ª–∏—Ü, ETL, —ç–∫—Å–ø–æ—Ä—Ç –æ—Ç—á–µ—Ç–æ–≤

### **Device Simulator**

- **–ó–∞–¥–∞—á–∞:** –≠–º—É–ª—è—Ü–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **–§—É–Ω–∫—Ü–∏–∏:** Virtual device behavior, –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, edge cases
- **–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:** –î–æ 1000 –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –Ω–∞ –∏–Ω—Å—Ç–∞–Ω—Å
- **–ú–æ–π –≤–∫–ª–∞–¥:** –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å–∏–º—É–ª—è—Ç–æ—Ä–∞ (–≠—Ç–∞–ø 3)

### **PostgreSQL Read Replica**

- **–ó–∞–¥–∞—á–∞:** –û—Ç–¥–µ–ª—å–Ω–∞—è –±–∞–∑–∞ –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- **–§—É–Ω–∫—Ü–∏–∏:** –¢—è–∂–µ–ª—ã–µ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–ø—Ä–æ—Å—ã –±–µ–∑ –≤–ª–∏—è–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–Ω—É—é —Å–∏—Å—Ç–µ–º—É
- **–†–µ–ø–ª–∏–∫–∞—Ü–∏—è:** –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ—Ç primary

### **ETL Process**

- **–ó–∞–¥–∞—á–∞:** –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ—Ç–æ–∫–∞ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- **–§—É–Ω–∫—Ü–∏–∏:** –ê–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö, –º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
- **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:** Go goroutines, worker pools

### **Redis (Report Cache)**

- **–ó–∞–¥–∞—á–∞:** –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç—è–∂–µ–ª—ã—Ö –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- **–§—É–Ω–∫—Ü–∏–∏:** Cache invalidation, TTL –¥–ª—è –æ—Ç—á–µ—Ç–æ–≤

---

## üîÑ **APACHE KAFKA MESSAGE BUS**

### **–¢–æ–ø–∏–∫–∏:**

- **job.events** - 3 –ø–∞—Ä—Ç–∏—Ü–∏–∏, 7 –¥–Ω–µ–π (created, updated, completed)
- **device.commands** - 20 –ø–∞—Ä—Ç–∏—Ü–∏–π, 24 —á–∞—Å–∞ (–∫–æ–º–∞–Ω–¥—ã —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º)
- **device.status** - 50 –ø–∞—Ä—Ç–∏—Ü–∏–π, 72 —á–∞—Å–∞ (—Å—Ç–∞—Ç—É—Å—ã –æ—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤)
- **device.telemetry** - 30 –ø–∞—Ä—Ç–∏—Ü–∏–π, 24 —á–∞—Å–∞ (–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —É—Å—Ç—Ä–æ–π—Å—Ç–≤)

### **Dead Letter Queues:**

- **job.dlq** - –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –∑–∞–¥–∞–Ω–∏–π
- **device.status.dlq** - –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã –æ—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤

### **–ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ:**

- **–ü–æ device_id** –¥–ª—è ordered processing —Å—Ç–∞—Ç—É—Å–æ–≤
- **–ü–æ event_type** –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π

---

## üóÑÔ∏è **SHARED DATA INFRASTRUCTURE**

### **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**

- **Prometheus** - —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫, alerting rules
- **Grafana** - –¥–∞—à–±–æ—Ä–¥—ã, –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è

### **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**

- **ELK Stack** - —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

### **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**

- **Vault** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–∞–º–∏ –∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏

### **Service Discovery:**

- **Consul** - –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤, health checks

### **Load Balancing:**

- **HAProxy** - —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏

### **Backup & Archive:**

- **–°–∏—Å—Ç–µ–º–∞ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è** - disaster recovery

---

## üåê **–í–ù–ï–®–ù–ò–ï –°–ò–°–¢–ï–ú–´**

### **MQTT Broker**

- **–ó–∞–¥–∞—á–∞:** –°–≤—è–∑—å —Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ –≤ –∫–∞—Ä—å–µ—Ä–∞—Ö
- **–ü—Ä–æ—Ç–æ–∫–æ–ª:** MQTT v3.1.1, QoS=1
- **–¢–æ–ø–∏–∫–∏:** commands/{device_id}/ota, status/{device_id}/update

### **–ö–ê–ú–ê–ó –°–∞–º–æ—Å–≤–∞–ª—ã**

- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:** 500+ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- **–ü–ª–∞—Ç—Ñ–æ—Ä–º—ã:** STM32, ESP32, Jetson –º–æ–¥—É–ª–∏
- **–£—Å–ª–æ–≤–∏—è:** –ù–µ—Å—Ç–∞–±–∏–ª—å–Ω–∞—è —Å–≤—è–∑—å, —É–¥–∞–ª–µ–Ω–Ω—ã–µ –∫–∞—Ä—å–µ—Ä—ã

### **–ö–ê–ú–ê–ó ERP**

- **–ó–∞–¥–∞—á–∞:** –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏
- **API:** Fleet management, maintenance scheduling
- **–ü—Ä–æ—Ç–æ–∫–æ–ª:** REST API, OAuth2 –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

---

## üéØ **–ú–û–Ø –†–û–õ–¨ –ò –ü–†–û–ì–†–ï–°–°–ò–Ø**

### **–≠—Ç–∞–ø 1 (1.5 –≥–æ–¥–∞): Job Management - Junior**

- Job Service CRUD API, –±–∞–∑–æ–≤–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å PostgreSQL

### **–≠—Ç–∞–ø 2 (1 –≥–æ–¥): Device Communication - Junior+/Mid-**

- Event Processor, Kafka integration, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### **–≠—Ç–∞–ø 3 (1 –≥–æ–¥): Analytics & Testing - Mid**

- Reporting Service, Device Simulator, —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏

### **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫:**

- **Backend:** Go, gRPC, REST API
- **–ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:** PostgreSQL, Redis
- **–û—á–µ—Ä–µ–¥–∏:** Apache Kafka (sarama)
- **–•—Ä–∞–Ω–∏–ª–∏—â–µ:** MinIO (S3-compatible)
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** Prometheus, Grafana
- **–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:** Docker, Kubernetes

# üîÑ WORKFLOW –û–ë–ù–û–í–õ–ï–ù–ò–Ø –ü–†–û–®–ò–í–ö–ò

## **1. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è**

```
–û–ø–µ—Ä–∞—Ç–æ—Ä (UI) ‚Üí API Gateway ‚Üí Job Service
```

- **–ó–∞–ø—Ä–æ—Å:** `POST /jobs` (device_id, firmware_version, schedule_time)
- **Job Service:** –í–∞–ª–∏–¥–∞—Ü–∏—è ‚Üí —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ PostgreSQL + event_outbox
- **Outbox Worker:** –ß–∏—Ç–∞–µ—Ç outbox ‚Üí –ø—É–±–ª–∏–∫—É–µ—Ç `job.created` –≤ Kafka

## **2. –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ**

```
Kafka (job.events) ‚Üí Scheduler
```

- **Scheduler:** –ü–æ–ª—É—á–∞–µ—Ç `job.created` ‚Üí –¥–æ–±–∞–≤–ª—è–µ—Ç –≤ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ
- **–ü–æ –≤—Ä–µ–º–µ–Ω–∏:** Scheduler –ø—É–±–ª–∏–∫—É–µ—Ç `job.ready_to_execute` –≤ Kafka

## **3. –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–º–∞–Ω–¥—ã**

```
Kafka (ready_to_execute) ‚Üí Dispatcher ‚Üí MQTT ‚Üí –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
```

- **Dispatcher:** –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–æ–º–∞–Ω–¥—É + presigned URL –∏–∑ MinIO
- **MQTT:** –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ `commands/{device_id}/ota`
- **–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ:** –ü–æ–ª—É—á–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É, –Ω–∞—á–∏–Ω–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

## **4. –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**

```
–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ ‚Üí MQTT ‚Üí Kafka ‚Üí Event Processor ‚Üí Job Service
```

- **–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ —à–ª–µ—Ç —Å—Ç–∞—Ç—É—Å—ã:** `downloading` ‚Üí `flashing` ‚Üí `done`/`error`
- **Event Processor:** –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å—ã ‚Üí –æ–±–Ω–æ–≤–ª—è–µ—Ç –∑–∞–¥–∞–Ω–∏–µ —á–µ—Ä–µ–∑ gRPC
- **Job Service:** –§–∏–Ω–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å –≤ PostgreSQL

## **5. –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ**

```
Job Service ‚Üí Kafka (job.completed) ‚Üí Reporting Service
```

- **Reporting:** –ü–æ–ª—É—á–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è ‚Üí –æ–±–Ω–æ–≤–ª—è–µ—Ç –∞–Ω–∞–ª–∏—Ç–∏–∫—É
- **–û–ø–µ—Ä–∞—Ç–æ—Ä:** –í–∏–¥–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ UI —á–µ—Ä–µ–∑ API Gateway

---

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** 15-60 –º–∏–Ω—É—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ –ø—Ä–æ—à–∏–≤–∫–∏ –∏ –∫–∞—á–µ—Å—Ç–≤–∞ —Å–≤—è–∑–∏.

**–¢–æ—á–∫–∏ –æ—Ç–∫–∞–∑–∞:** MQTT —Å–≤—è–∑—å, –∫–∞—á–µ—Å—Ç–≤–æ —Å–µ—Ç–∏ –≤ –∫–∞—Ä—å–µ—Ä–µ, —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –ø—Ä–æ—à–∏–≤–∫–∏.

# üî• –°–õ–û–ñ–ù–´–ï –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –ó–ê–î–ê–ß–ò

## **1. Outbox Pattern - –¥–µ—Ç–∞–ª—å–Ω–æ**

### **–ü—Ä–æ–±–ª–µ–º–∞ (Dual Write Problem):**

–ö–æ–≥–¥–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞–¥–∞–Ω–∏–µ, –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –¥–≤–µ –æ–ø–µ—Ä–∞—Ü–∏–∏:

1. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∑–∞–¥–∞–Ω–∏–µ –≤ PostgreSQL
2. –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ `job.created` –≤ Kafka

**–ß—Ç–æ –º–æ–∂–µ—Ç –ø–æ–π—Ç–∏ –Ω–µ —Ç–∞–∫:**

- –°–æ—Ö—Ä–∞–Ω–∏–ª–∏ –≤ –±–∞–∑—É ‚Üí —É–ø–∞–ª–∏ –¥–æ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ Kafka = —Å–æ–±—ã—Ç–∏–µ –ø–æ—Ç–µ—Ä—è–Ω–æ
- –û—Ç–ø—Ä–∞–≤–∏–ª–∏ –≤ Kafka ‚Üí —É–ø–∞–ª–∏ –¥–æ –∑–∞–ø–∏—Å–∏ –≤ –±–∞–∑—É = –¥—Ä—É–≥–∏–µ —Å–µ—Ä–≤–∏—Å—ã –ø–æ–ª—É—á–∏–ª–∏ —Å–æ–±—ã—Ç–∏–µ –æ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º –∑–∞–¥–∞–Ω–∏–∏
- –ß–∞—Å—Ç–∏—á–Ω—ã–µ —Å–±–æ–∏: –±–∞–∑–∞ –¥–æ—Å—Ç—É–ø–Ω–∞, Kafka –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞

### **–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–µ –ø–ª–æ—Ö–∏–µ —Ä–µ—à–µ–Ω–∏—è:**

- **–°–Ω–∞—á–∞–ª–∞ Kafka, –ø–æ—Ç–æ–º –±–∞–∑–∞** - —Ä–∏—Å–∫ phantom events
- **–°–Ω–∞—á–∞–ª–∞ –±–∞–∑–∞, –ø–æ—Ç–æ–º Kafka** - —Ä–∏—Å–∫ lost events
- **Distributed transactions (2PC)** - —Å–ª–æ–∂–Ω–æ, –º–µ–¥–ª–µ–Ω–Ω–æ, Kafka –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç

### **Outbox Pattern - –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:**

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**

1. **–í –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏:** —Å–æ—Ö—Ä–∞–Ω—è–µ–º –∑–∞–¥–∞–Ω–∏–µ –≤ —Ç–∞–±–ª–∏—Ü—É `jobs` + —Å–æ–±—ã—Ç–∏–µ –≤ —Ç–∞–±–ª–∏—Ü—É `event_outbox`
2. **–û—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–æ–Ω–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å (Outbox Worker):** —á–∏—Ç–∞–µ—Ç `event_outbox`, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ Kafka, –ø–æ–º–µ—á–∞–µ—Ç –∫–∞–∫ "–æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ"
3. **–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞:** —É–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è

**–ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã:**

- **Atomicity —á–µ—Ä–µ–∑ –µ–¥–∏–Ω—É—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é** - –ª–∏–±–æ –≤—Å–µ —Å–æ—Ö—Ä–∞–Ω–∏–ª–æ—Å—å, –ª–∏–±–æ –Ω–∏—á–µ–≥–æ
- **At-least-once delivery** - —Å–æ–±—ã—Ç–∏–µ —Ç–æ—á–Ω–æ –¥–æ–π–¥–µ—Ç –¥–æ Kafka (–º–æ–∂–µ—Ç –¥–æ–π—Ç–∏ –¥–≤–∞–∂–¥—ã)
- **Idempotency** - –ø–æ–ª—É—á–∞—Ç–µ–ª–∏ –¥–æ–ª–∂–Ω—ã —É–º–µ—Ç—å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –¥—É–±–ª–∏–∫–∞—Ç—ã
- **Retry logic** - –µ—Å–ª–∏ Kafka –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞, –ø–æ–≤—Ç–æ—Ä—è–µ–º –ø–æ–ø—ã—Ç–∫–∏

**–ß—Ç–æ –ø–æ–ª—É—á–∏–ª–∏:**

- **–ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞** - —Å–æ–±—ã—Ç–∏—è –Ω–µ —Ç–µ—Ä—è—é—Ç—Å—è –Ω–∏–∫–æ–≥–¥–∞
- **Eventual consistency** - —Å–æ–±—ã—Ç–∏–µ –¥–æ–π–¥–µ—Ç, –Ω–æ —Å –Ω–µ–±–æ–ª—å—à–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π
- **Resilience** - —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –∫–æ–≥–¥–∞ Kafka –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞

### **–ú–æ–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è:**

- **Exponential backoff** –¥–ª—è retry - 1s, 2s, 4s, 8s, –ø–æ—Ç–æ–º –≤ DLQ
- **Dead Letter Queue** –¥–ª—è —Å–æ–±—ã—Ç–∏–π –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —É–¥–∞–µ—Ç—Å—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–æ–ª–≥–æ
- **Batch processing** - –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø–æ 10 —Å–æ–±—ã—Ç–∏–π –∑–∞ —Ä–∞–∑ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- **Monitoring** - –º–µ—Ç—Ä–∏–∫–∏: `outbox_pending_total`, `outbox_errors_total`

---

## **2. Optimistic Locking** (–∫—Ä–∞—Ç–∫–æ)

**–ü—Ä–æ–±–ª–µ–º–∞:** Concurrent updates —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–¥–∞–Ω–∏—è –æ—Ç —Ä–∞–∑–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏–ª –ø–æ–ª–µ `version`, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤–µ—Ä—Å–∏—è —Å–æ–≤–ø–∞–¥–∞–µ—Ç
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** Race conditions –∏—Å—á–µ–∑–ª–∏, –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —Ñ–∏–Ω–∞–ª—å–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã

## **3. Deadlock –≤ Event Processor** (–∫—Ä–∞—Ç–∫–æ)

**–ü—Ä–æ–±–ª–µ–º–∞:** –ó–∞—Ö–≤–∞—Ç—ã–≤–∞–ª mutex –ø–µ—Ä–µ–¥ –º–µ–¥–ª–µ–Ω–Ω—ã–º–∏ gRPC –≤—ã–∑–æ–≤–∞–º–∏, –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª –≤—Å—é –æ–±—Ä–∞–±–æ—Ç–∫—É
**–†–µ—à–µ–Ω–∏–µ:** –í—ã–Ω–µ—Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –∑–∞ –ø—Ä–µ–¥–µ–ª—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π —Å–µ–∫—Ü–∏–∏
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** Throughput –≤—ã—Ä–æ—Å –≤ 5 —Ä–∞–∑, latency —Å–Ω–∏–∑–∏–ª—Å—è

## **4. Kafka Partitioning Strategy** (–∫—Ä–∞—Ç–∫–æ)

**–ü—Ä–æ–±–ª–µ–º–∞:** Hot partitions, –Ω–µ—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ consumer'—ã
**–†–µ—à–µ–Ω–∏–µ:** –ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ `hash(device_id)`, 50 –ø–∞—Ä—Ç–∏—Ü–∏–π –¥–ª—è device.status
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –†–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ, linear scaling –¥–æ 50 consumer'–æ–≤

## **5. Idempotency –≤ Event Processor** (–∫—Ä–∞—Ç–∫–æ)

**–ü—Ä–æ–±–ª–µ–º–∞:** –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –ø—Ä–∏ network glitches
**–†–µ—à–µ–Ω–∏–µ:** Unique constraint –Ω–∞ `(job_id, message_id, status)` + Redis –∫–µ—à
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** Exactly-once processing —Å–µ–º–∞–Ω—Ç–∏–∫–∞ –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## **6. Circuit Breaker –¥–ª—è gRPC** (–∫—Ä–∞—Ç–∫–æ)

**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–æ–≥–¥–∞ Job Service –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, Event Processor —Ä–æ–Ω—è–µ—Ç –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è
**–†–µ—à–µ–Ω–∏–µ:** Circuit breaker pattern - –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö –ø–µ—Ä–µ—Ö–æ–¥–∏–º –≤ fallback —Ä–µ–∂–∏–º
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** Graceful degradation, —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è –≤ –æ—á–µ—Ä–µ–¥–∏ –¥–ª—è retry

## **7. Consumer Group Rebalancing** (–∫—Ä–∞—Ç–∫–æ)

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ deploy constant rebalancing —É–±–∏–≤–∞–ª processing
**–†–µ—à–µ–Ω–∏–µ:** –£–≤–µ–ª–∏—á–∏–ª session timeout, graceful shutdown, sticky partition assignment
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** Stable consumer group, minimal downtime –ø—Ä–∏ deploy

---

## **üéØ –ì–ª–∞–≤–Ω–æ–µ –Ω–∞ —Å–æ–±–µ—Å–µ:**

**–ù–µ –∫–æ–¥, –∞ –ø–æ–Ω–∏–º–∞–Ω–∏–µ:**

- **–ó–∞—á–µ–º** –Ω—É–∂–µ–Ω outbox pattern
- **–ö–∞–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã** –æ–Ω —Ä–µ—à–∞–µ—Ç
- **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç** –Ω–∞ –≤—ã—Å–æ–∫–æ–º —É—Ä–æ–≤–Ω–µ
- **–ö–∞–∫–∏–µ trade-offs** - –∑–∞–¥–µ—Ä–∂–∫–∞ vs consistency

**Outbox - —ç—Ç–æ –ø—Ä–æ:**

- –ü–æ–Ω–∏–º–∞–Ω–∏–µ distributed systems –ø—Ä–æ–±–ª–µ–º
- –ó–Ω–∞–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –¥–ª—è –∏—Ö —Ä–µ—à–µ–Ω–∏—è
- –û–ø—ã—Ç —Ä–∞–±–æ—Ç—ã —Å event-driven –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π
- Production-ready –º—ã—à–ª–µ–Ω–∏–µ

–ò–º–µ–Ω–Ω–æ —ç—Ç–æ —Ü–µ–Ω—è—Ç –Ω–∞ —Å–æ–±–µ—Å–∞—Ö, –∞ –Ω–µ –∑–Ω–∞–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ SQL —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞!

# üí• –§–ê–ö–ê–ü–´ –ò –ò–• –†–ï–®–ï–ù–ò–Ø

## **1. Deadlock –≤ Event Processor - –¥–µ—Ç–∞–ª—å–Ω–æ**

### **–ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ:**

–û–±—ã—á–Ω—ã–π –≤–µ—á–µ—Ä, Event Processor –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª —Å—Ç–∞—Ç—É—Å—ã –æ—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤. –í–Ω–µ–∑–∞–ø–Ω–æ **throughput —É–ø–∞–ª –¥–æ –Ω—É–ª—è**. –°–µ—Ä–≤–∏—Å –∂–∏–≤–æ–π, –ª–æ–≥–∏ –ø–∏—à—É—Ç—Å—è, –Ω–æ **—Å–æ–æ–±—â–µ–Ω–∏—è –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è**. Consumer lag —Ä–∞—Å—Ç–µ—Ç: 100... 500... 1000 —Å–æ–æ–±—â–µ–Ω–∏–π.

### **–ü–µ—Ä–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (–ø–∞–Ω–∏–∫–∞):**

- –°–º–æ—Ç—Ä—é –¥–∞—à–±–æ—Ä–¥ Grafana - **–≤—Å–µ –º–µ—Ç—Ä–∏–∫–∏ –≤ –∫—Ä–∞—Å–Ω–æ–π –∑–æ–Ω–µ**
- –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç: —Å–æ–æ–±—â–µ–Ω–∏—è —á–∏—Ç–∞—é—Ç—Å—è –∏–∑ Kafka, –Ω–æ –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è
- –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—é —Å–µ—Ä–≤–∏—Å - –ø–æ–º–æ–≥–∞–µ—Ç –Ω–∞ 10 –º–∏–Ω—É—Ç, –ø–æ—Ç–æ–º –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è
- **–ê–ª–µ—Ä—Ç –≤ Slack**, —Ç–∏–º–ª–∏–¥ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ —Ä–∞–∑–±–æ—Ä—É

### **–ü–æ–∏—Å–∫ –ø—Ä–∏—á–∏–Ω—ã:**

**–°–∏–º–ø—Ç–æ–º—ã:**

- Processing rate = 0 —Å–æ–æ–±—â–µ–Ω–∏–π/—Å–µ–∫ (–±—ã–ª–æ 50+)
- CPU usage = 100% (–æ–±—ã—á–Ω–æ 20-30%)
- Memory —Ä–∞—Å—Ç–µ—Ç –º–µ–¥–ª–µ–Ω–Ω–æ (–Ω–µ memory leak)
- **–ì–æ—Ä—É—Ç–∏–Ω—ã –≤–∏—Å—è—Ç** - –∏—Ö –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞—Å—Ç–µ—Ç

**Debugging:**

- **pprof –ø—Ä–æ—Ñ–∏–ª—å** –ø–æ–∫–∞–∑–∞–ª: 50+ –≥–æ—Ä—É—Ç–∏–Ω –∂–¥—É—Ç –æ–¥–∏–Ω mutex
- –û–¥–Ω–∞ –≥–æ—Ä—É—Ç–∏–Ω–∞ –¥–µ—Ä–∂–∏—Ç mutex –∏ **–∂–¥–µ—Ç network call**
- –≠—Ç–æ gRPC –≤—ã–∑–æ–≤ –≤ Job Service –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞

### **Root Cause Analysis:**

**–ü–ª–æ—Ö–æ–π –∫–æ–¥:**

```go
func (p *EventProcessor) processMessage(msg) {
    p.metricsMutex.Lock()  // ‚ùå –û–®–ò–ë–ö–ê: lock –î–û network call

    // –ú–µ–¥–ª–µ–Ω–Ω—ã–π network call - 100-500ms
    err := p.jobServiceClient.UpdateStatus(...)

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫
    p.updateMetrics(...)

    p.metricsMutex.Unlock()
}
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ:**

1. –ì–æ—Ä—É—Ç–∏–Ω–∞ A –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç mutex
2. –ò–¥–µ—Ç –¥–µ–ª–∞—Ç—å gRPC call (–º–µ–¥–ª–µ–Ω–Ω–æ: 200ms)
3. –ì–æ—Ä—É—Ç–∏–Ω—ã B, C, D... –≤—Å—Ç–∞—é—Ç –≤ –æ—á–µ—Ä–µ–¥—å –Ω–∞ mutex
4. –ü—Ä–∏ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ –≤—Å–µ 50 –≥–æ—Ä—É—Ç–∏–Ω –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è
5. **–ü–æ–ª–Ω—ã–π deadlock —Å–∏—Å—Ç–µ–º—ã**

### **–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ (hotfix):**

```go
func (p *EventProcessor) processMessage(msg) {
    // –°–Ω–∞—á–∞–ª–∞ network call –ë–ï–ó lock
    err := p.jobServiceClient.UpdateStatus(...)

    // –ü–û–¢–û–ú –±—ã—Å—Ç—Ä–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫
    p.metricsMutex.Lock()
    p.updateMetrics(...)  // 1-2ms –º–∞–∫—Å–∏–º—É–º
    p.metricsMutex.Unlock()
}
```

### **–î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:**

1. **–£–±—Ä–∞–ª mutex –¥–ª—è –º–µ—Ç—Ä–∏–∫** - Prometheus client thread-safe –¥–ª—è –æ—Å–Ω–æ–≤–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
2. **Atomic counters** –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –º–µ—Ç—Ä–∏–∫
3. **Connection pooling** –¥–ª—è gRPC - –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
4. **Circuit breaker** - –µ—Å–ª–∏ Job Service –º–µ–¥–ª–µ–Ω–Ω—ã–π, –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É
5. **Async metrics** - –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –º–µ—Ç—Ä–∏–∫–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –∫–∞–Ω–∞–ª–µ

### **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è:**

- **Goroutine count** - –∞–ª–µ—Ä—Ç –µ—Å–ª–∏ >100
- **Mutex contention** - pprof –≤ production
- **Processing latency P99** - –∞–ª–µ—Ä—Ç –µ—Å–ª–∏ >1 —Å–µ–∫—É–Ω–¥–∞
- **gRPC call duration** - –∞–ª–µ—Ä—Ç –µ—Å–ª–∏ >500ms

### **–ß—Ç–æ —É–∑–Ω–∞–ª:**

- **–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –¥–µ—Ä–∂–∏ lock –≤–æ –≤—Ä–µ–º—è network calls**
- **Critical sections –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –∫–æ—Ä–æ—Ç–∫–∏–º–∏**
- **Production profiling –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω** –¥–ª—è Go —Å–µ—Ä–≤–∏—Å–æ–≤
- **Load testing** –Ω–µ –ø–æ–∫—Ä—ã–ª —ç—Ç–æ—Ç —Å—Ü–µ–Ω–∞—Ä–∏–π - –Ω—É–∂–Ω—ã **stress tests**

### **–†–µ–∑—É–ª—å—Ç–∞—Ç:**

- **Throughput:** 0 ‚Üí 200+ —Å–æ–æ–±—â–µ–Ω–∏–π/—Å–µ–∫
- **Latency P99:** ‚àû ‚Üí 50ms
- **CPU usage:** 100% ‚Üí 15-25%
- **–°–∏—Å—Ç–µ–º–∞ —Å—Ç–∞–±–∏–ª—å–Ω–∞** —É–∂–µ –ø–æ–ª–≥–æ–¥–∞ –ø–æ—Å–ª–µ —Ñ–∏–∫—Å–∞

---

## **2. Memory leak –≤ production** (–∫—Ä–∞—Ç–∫–æ)

**–ß—Ç–æ:** Event Processor –∂—Ä–∞–ª –ø–∞–º—è—Ç—å, —á–µ—Ä–µ–∑ 2 —á–∞—Å–∞ OOM kill
**–ü—Ä–∏—á–∏–Ω–∞:** Map –¥–ª—è idempotency —Ä–æ—Å –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ + goroutine leaks
**–†–µ—à–µ–Ω–∏–µ:** LRU cache + proper goroutine cleanup + memory monitoring
**–£—Ä–æ–∫:** Always profile memory usage –≤ production

## **3. Connection pool exhaustion** (–∫—Ä–∞—Ç–∫–æ)

**–ß—Ç–æ:** Job Service –æ—Ç–¥–∞–≤–∞–ª 500-–∫–∏ "too many connections"  
**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ –∑–∞–∫—Ä—ã–≤–∞–ª–∏ transactions –≤ error cases
**–†–µ—à–µ–Ω–∏–µ:** defer tx.Rollback() + query timeouts + pool tuning
**–£—Ä–æ–∫:** Proper resource cleanup –∫—Ä–∏—Ç–∏—á–µ–Ω –≤ Go

## **4. Kafka consumer group rebalancing storm** (–∫—Ä–∞—Ç–∫–æ)

**–ß—Ç–æ:** –ü–æ—Å–ª–µ deploy constant rebalancing, processing stopped
**–ü—Ä–∏—á–∏–Ω–∞:** Aggressive rolling deployment + –∫–æ—Ä–æ—Ç–∫–∏–µ timeouts
**–†–µ—à–µ–Ω–∏–µ:** –£–≤–µ–ª–∏—á–∏–ª–∏ session timeout + graceful shutdown + blue-green deploy
**–£—Ä–æ–∫:** Kafka —Ç—Ä–µ–±—É–µ—Ç –∞–∫–∫—É—Ä–∞—Ç–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–∞–π–º–∞—É—Ç–æ–≤

## **5. PostgreSQL query timeout cascade** (–∫—Ä–∞—Ç–∫–æ)

**–ß—Ç–æ:** –û–¥–∏–Ω –º–µ–¥–ª–µ–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª –≤—Å—é –±–∞–∑—É
**–ü—Ä–∏—á–∏–Ω–∞:** Long-running analytical query –±–µ–∑ LIMIT
**–†–µ—à–µ–Ω–∏–µ:** Query timeouts + read replica –¥–ª—è analytics + connection limits
**–£—Ä–æ–∫:** –ò–∑–æ–ª–∏—Ä–æ–≤–∞—Ç—å OLTP –∏ OLAP –Ω–∞–≥—Ä—É–∑–∫—É

## **6. Redis connection leak** (–∫—Ä–∞—Ç–∫–æ)

**–ß—Ç–æ:** Event Processor –ø–µ—Ä–µ—Å—Ç–∞–≤–∞–ª —Ä–∞–±–æ—Ç–∞—Ç—å —Å –∫–µ—à–µ–º
**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ –∑–∞–∫—Ä—ã–≤–∞–ª–∏ Redis connections –≤ error paths
**–†–µ—à–µ–Ω–∏–µ:** Connection pooling + proper error handling
**–£—Ä–æ–∫:** All external resources need proper lifecycle management

## **7. MQTT broker overload** (–∫—Ä–∞—Ç–∫–æ)

**–ß—Ç–æ:** –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –Ω–µ –ø–æ–ª—É—á–∞–ª–∏ –∫–æ–º–∞–Ω–¥—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
**–ü—Ä–∏—á–∏–Ω–∞:** –û—Ç–ø—Ä–∞–≤–ª—è–ª–∏ –∫–æ–º–∞–Ω–¥—ã –≤—Å–µ–º 500 —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
**–†–µ—à–µ–Ω–∏–µ:** Rate limiting + batch sending + queue management
**–£—Ä–æ–∫:** External systems have limits, respect them

---

## **üéØ –ì–ª–∞–≤–Ω–æ–µ –ø—Ä–æ —Ñ–∞–∫–∞–ø—ã –Ω–∞ —Å–æ–±–µ—Å–µ:**

**–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç:**

- **Production experience** - —Ä–∞–±–æ—Ç–∞–ª —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –ø—Ä–æ–±–ª–µ–º–∞–º–∏
- **Troubleshooting skills** - —É–º–µ—é –∏—Å–∫–∞—Ç—å –ø—Ä–∏—á–∏–Ω—ã
- **System thinking** - –ø–æ–Ω–∏–º–∞—é –∫–∞–∫ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—Ç
- **Learning from mistakes** - –∞–Ω–∞–ª–∏–∑–∏—Ä—É—é –∏ —É–ª—É—á—à–∞—é

**–ù–µ —Å—Ç–µ—Å–Ω—è–π—Å—è —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞—Ç—å —Ñ–∞–∫–∞–ø—ã!**

- –í—Å–µ –¥–µ–ª–∞—é—Ç –æ—à–∏–±–∫–∏ –≤ production
- –í–∞–∂–Ω–æ –∫–∞–∫ —Ç—ã –∏—Ö –∏—Å–ø—Ä–∞–≤–ª—è–µ—à—å –∏ —á—Ç–æ –≤—ã–Ω–æ—Å–∏—à—å
- –≠—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç **—Ä–µ–∞–ª—å–Ω—ã–π –æ–ø—ã—Ç**, –∞ –Ω–µ —Ç–µ–æ—Ä–∏—é

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–∞—Å—Å–∫–∞–∑–∞:**

1. **–ß—Ç–æ —Å–ª—É—á–∏–ª–æ—Å—å** (—Å–∏–º–ø—Ç–æ–º—ã)
2. **–ö–∞–∫ –∏—Å–∫–∞–ª –ø—Ä–∏—á–∏–Ω—É** (debugging process)
3. **Root cause** (—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø—Ä–∏—á–∏–Ω–∞)
4. **–ö–∞–∫ –∏—Å–ø—Ä–∞–≤–∏–ª** (immediate + long-term)
5. **–ß—Ç–æ —É–∑–Ω–∞–ª** (lessons learned)
